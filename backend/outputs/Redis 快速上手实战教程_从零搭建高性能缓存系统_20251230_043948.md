# Redis å¿«é€Ÿä¸Šæ‰‹å®æˆ˜æ•™ç¨‹ï¼šä»é›¶æ­å»ºé«˜æ€§èƒ½ç¼“å­˜ç³»ç»Ÿ


![Redis å¿«é€Ÿä¸Šæ‰‹å®æˆ˜æ•™ç¨‹ï¼šä»é›¶æ­å»ºé«˜æ€§èƒ½ç¼“å­˜ç³»ç»Ÿ - æ¶æ„å›¾](./image/f9ebea7410a543c592a24d5141d9e107.png)

*Redis å¿«é€Ÿä¸Šæ‰‹å®æˆ˜æ•™ç¨‹ï¼šä»é›¶æ­å»ºé«˜æ€§èƒ½ç¼“å­˜ç³»ç»Ÿ - ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ*

---


## Rediså…¥é—¨ Â· å†…å­˜æ•°æ®åº“ Â· ç¼“å­˜å®æˆ˜ Â· æ•°æ®ç»“æ„ Â· æ€§èƒ½ä¼˜åŒ–

**é˜…è¯»æ—¶é—´**: 30 min

> 30åˆ†é’ŸæŒæ¡Redisæ ¸å¿ƒèƒ½åŠ›ï¼Œç‹¬ç«‹éƒ¨ç½²ç”Ÿäº§çº§ç¼“å­˜æœåŠ¡ã€‚

## ç›®å½•
- [Redis æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆä½ éœ€è¦å®ƒ](#redis-æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆä½ éœ€è¦å®ƒ)
- [ç¯å¢ƒå‡†å¤‡ï¼šä¸€é”®å®‰è£…ä¸é…ç½® Redis](#ç¯å¢ƒå‡†å¤‡ä¸€é”®å®‰è£…ä¸é…ç½®-redis)
- [å®æˆ˜æ¼”ç»ƒï¼šäº”å¤§æ•°æ®ç»“æ„æ“ä½œè¯¦è§£](#å®æˆ˜æ¼”ç»ƒäº”å¤§æ•°æ®ç»“æ„æ“ä½œè¯¦è§£)
- [æ€§èƒ½éªŒè¯ï¼šå‹åŠ›æµ‹è¯•ä¸ç»“æœåˆ†æ](#æ€§èƒ½éªŒè¯å‹åŠ›æµ‹è¯•ä¸ç»“æœåˆ†æ)
- [æ€»ç»“ä¸è¿›é˜¶è·¯çº¿](#æ€»ç»“ä¸è¿›é˜¶è·¯çº¿)

---

åœ¨ç°ä»£é«˜å¹¶å‘åº”ç”¨æ¶æ„ä¸­ï¼ŒRedis å‡­å€Ÿå…¶å†…å­˜å­˜å‚¨ä¸å¤šæ•°æ®ç»“æ„æ”¯æŒï¼Œå·²æˆä¸ºç¼“å­˜å±‚çš„é¦–é€‰æ–¹æ¡ˆã€‚æœ¬æ•™ç¨‹ä¸“ä¸ºä¸­çº§å¼€å‘è€…è®¾è®¡ï¼Œå¸¦ä½ å¿«é€ŸæŒæ¡ Redis æ ¸å¿ƒåŠŸèƒ½ä¸å®æˆ˜éƒ¨ç½²ï¼Œæ— éœ€æ·±åšèƒŒæ™¯å³å¯æ„å»ºæ¯ç§’åä¸‡çº§è¯»å†™çš„ç¼“å­˜æœåŠ¡ã€‚é€šè¿‡æœ¬æ•™ç¨‹ï¼Œä½ å°†äº²æ‰‹å®Œæˆç¯å¢ƒæ­å»ºã€å¸¸ç”¨æ“ä½œã€æ€§èƒ½æµ‹è¯•å…¨æµç¨‹ã€‚

---## Redis æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆä½ éœ€è¦å®ƒ

ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ï¼šç”¨æˆ·ç–¯ç‹‚ç‚¹å‡»â€œæŠ¢è´­â€æŒ‰é’®ï¼Œç³»ç»Ÿå´å¡é¡¿å¦‚èœ—ç‰›ï¼›æˆ–è€…å‡Œæ™¨ä¸‰ç‚¹è¢«æŠ¥è­¦ç”µè¯åµé†’ï¼Œåªå› æ•°æ®åº“åœ¨é«˜å¹¶å‘ä¸‹ä¸å ªé‡è´Ÿï¼Ÿæƒ³è±¡ä¸€ä¸‹ï¼Œçº¿ä¸Šçªç„¶æ¶Œå…¥ç™¾ä¸‡çº§è¯·æ±‚ï¼Œä¼ ç»Ÿç£ç›˜æ•°æ®åº“è¿˜åœ¨æ…¢æ‚ æ‚ åœ°å¯»é“ã€è¯»ç›˜â€”â€”è€Œä½ çš„ç«äº‰å¯¹æ‰‹æ—©å·²ç”¨å†…å­˜ç¼“å­˜æ‰›ä½äº†æµé‡æ´ªå³°ã€‚è¿™ä¸æ˜¯ç§‘å¹»ç‰‡ï¼Œè€Œæ˜¯æ¯å¤©éƒ½åœ¨çœŸå®å‘ç”Ÿçš„äº’è”ç½‘æˆ˜åœºã€‚90%çš„æ€§èƒ½ç“¶é¢ˆå¹¶éæ¥è‡ªä¸šåŠ¡é€»è¾‘ï¼Œè€Œæ˜¯æ•°æ®è®¿é—®å±‚çš„ I/O å»¶è¿Ÿã€‚è¿™æ—¶å€™ï¼Œä½ éœ€è¦çš„ä¸æ˜¯æ›´è´µçš„æœåŠ¡å™¨ï¼Œè€Œæ˜¯ä¸€ä¸ªâ€œæ¶¡è½®å¢å‹å™¨â€â€”â€”Redisã€‚

> Redis ä¸æ˜¯æ›¿ä»£æ•°æ®åº“ï¼Œè€Œæ˜¯åŠ é€Ÿç³»ç»Ÿçš„â€˜æ¶¡è½®å¢å‹å™¨â€™ã€‚

### ä»€ä¹ˆæ˜¯ Redisï¼Ÿå®ƒèƒ½ä¸ºä½ åšä»€ä¹ˆï¼Ÿ

Redisï¼ˆRemote Dictionary Serverï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„ã€åŸºäºå†…å­˜çš„é”®å€¼å­˜å‚¨ç³»ç»Ÿï¼Œå¸¸è¢«ç§°ä¸ºâ€œå†…å­˜æ•°æ®åº“â€æˆ–â€œæ•°æ®ç»“æ„æœåŠ¡å™¨â€ã€‚å®ƒæœ€æ ¸å¿ƒçš„ä»·å€¼åœ¨äº**æé€Ÿå“åº”**ä¸**çµæ´»çš„æ•°æ®ç»“æ„æ”¯æŒ**ã€‚ä¸åŒäºä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“å°†æ•°æ®æŒä¹…åŒ–åˆ°ç£ç›˜ï¼ŒRedis å°†æ•°æ®å…¨éƒ¨åŠ è½½åœ¨å†…å­˜ä¸­æ“ä½œï¼Œè¯»å†™é€Ÿåº¦å¯è¾¾æ¯ç§’æ•°åä¸‡æ¬¡ï¼Œå»¶è¿Ÿä½è‡³å¾®ç§’çº§ã€‚

å®ƒçš„å…¸å‹åº”ç”¨åœºæ™¯åŒ…æ‹¬ï¼š

- **ç¼“å­˜å±‚**ï¼šå‡è½»æ•°æ®åº“å‹åŠ›ï¼ŒåŠ é€Ÿé¡µé¢åŠ è½½ã€‚æ¯”å¦‚å•†å“è¯¦æƒ…é¡µã€ç”¨æˆ·ä¸ªäººä¸­å¿ƒç­‰é«˜é¢‘è¯»å–å†…å®¹ã€‚
- **ä¼šè¯å­˜å‚¨**ï¼šåˆ†å¸ƒå¼ç¯å¢ƒä¸‹ç»Ÿä¸€ç®¡ç†ç”¨æˆ·ç™»å½•çŠ¶æ€ï¼Œå®ç°æ— çŠ¶æ€æœåŠ¡æ¨ªå‘æ‰©å±•ã€‚
- **æ’è¡Œæ¦œ/è®¡æ•°å™¨**ï¼šåˆ©ç”¨æœ‰åºé›†åˆï¼ˆZSetï¼‰å®æ—¶æ›´æ–°å’ŒæŸ¥è¯¢ Top N æ•°æ®ï¼Œå¦‚æ¸¸æˆç§¯åˆ†æ¦œã€çƒ­é—¨æ–‡ç« æ’è¡Œã€‚
- **æ¶ˆæ¯é˜Ÿåˆ—/å‘å¸ƒè®¢é˜…**ï¼šé€šè¿‡ List æˆ– Pub/Sub å®ç°è½»é‡çº§å¼‚æ­¥é€šä¿¡ï¼Œè§£è€¦ç³»ç»Ÿæ¨¡å—ã€‚
- **é™æµä¸åˆ†å¸ƒå¼é”**ï¼šæ§åˆ¶æ¥å£è®¿é—®é¢‘ç‡ï¼Œé˜²æ­¢æ¶æ„åˆ·å•æˆ–èµ„æºç«äº‰ã€‚

```mermaid
```mermaid
flowchart LR
    subgraph å‰ç«¯å±‚
        F[æµè§ˆå™¨/å®¢æˆ·ç«¯]
    end
    subgraph åº”ç”¨å±‚
        A[åº”ç”¨æœåŠ¡å™¨]
    end
    subgraph ç¼“å­˜å±‚
        R[Redis ç¼“å­˜]
    end
    subgraph æ•°æ®å±‚
        D[æ•°æ®åº“]
    end
    F --> A
    A --> R
    R --> D
    A -.-> D
```
```

*Redis åœ¨å…¸å‹ Web æ¶æ„ä¸­çš„ä½ç½®ï¼šå‰ç«¯è¯·æ±‚ç»åº”ç”¨æœåŠ¡å™¨ï¼Œä¼˜å…ˆè®¿é—® Redis ç¼“å­˜ï¼Œç¼“å­˜æœªå‘½ä¸­æ—¶æŸ¥è¯¢æ•°æ®åº“*

åœ¨è¿™ä¸ªæ¶æ„ä¸­ï¼ŒRedis ä½œä¸ºâ€œç¼“å†²å«â€ä½äºåº”ç”¨æœåŠ¡å™¨ä¸åç«¯æ•°æ®åº“ä¹‹é—´ã€‚å½“ç”¨æˆ·è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œåº”ç”¨é¦–å…ˆè¯¢é—® Redisï¼šâ€œä½ æœ‰è¿™ä¸ªæ•°æ®å—ï¼Ÿâ€å¦‚æœæœ‰ï¼Œç›´æ¥è¿”å›â€”â€”æ¯«ç§’çº§å“åº”ï¼›å¦‚æœæ²¡æœ‰ï¼Œå†å»æŸ¥æ•°æ®åº“ï¼Œå¹¶æŠŠç»“æœå­˜å…¥ Redis ä¾›ä¸‹æ¬¡ä½¿ç”¨ã€‚è¿™ç§æ¨¡å¼æå¤§é™ä½äº†æ•°æ®åº“è´Ÿè½½ï¼Œæå‡äº†æ•´ä½“ååèƒ½åŠ›ã€‚

### ä¸ºä»€ä¹ˆå†…å­˜æ¯”ç£ç›˜å¿«ï¼Ÿæ€§èƒ½å·®å¼‚ç©¶ç«Ÿæœ‰å¤šå¤§ï¼Ÿ

è¦ç†è§£ Redis çš„å¨åŠ›ï¼Œå¿…é¡»æ˜ç™½â€œå†…å­˜ vs ç£ç›˜â€çš„æœ¬è´¨åŒºåˆ«ã€‚

ä¼ ç»Ÿæ•°æ®åº“ï¼ˆå¦‚ MySQLã€PostgreSQLï¼‰ä¾èµ–ç£ç›˜è¿›è¡Œæ•°æ®æŒä¹…åŒ–ã€‚å³ä½¿æœ‰ Buffer Pool ç¼“å­˜æœºåˆ¶ï¼Œä¸€æ—¦å‘ç”Ÿå†·æ•°æ®è®¿é—®æˆ–ç¼“å­˜å¤±æ•ˆï¼Œå°±å¿…é¡»è§¦å‘ç£ç›˜ I/O â€”â€” è€Œæœºæ¢°ç¡¬ç›˜çš„éšæœºè¯»å–å»¶è¿Ÿçº¦ä¸º 10msï¼ŒSSD çº¦ä¸º 0.1msã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œå†…å­˜è®¿é—®å»¶è¿Ÿä»…ä¸º **çº³ç§’çº§åˆ«ï¼ˆçº¦ 100nsï¼‰**ï¼Œç›¸å·®åƒå€ä»¥ä¸Šï¼

ä¸¾ä¸ªä¾‹å­ï¼š
- æŸ¥è¯¢ä¸€æ¡ç”¨æˆ·ä¿¡æ¯ï¼Œä» MySQL è¯»å–å¹³å‡è€—æ—¶ 5â€“20msï¼›
- åŒæ ·çš„æ•°æ®ä» Redis è¯»å–ï¼Œåªéœ€ 0.1â€“0.5msã€‚

è¿™æ„å‘³ç€ï¼Œåœ¨åŒæ ·ç¡¬ä»¶æ¡ä»¶ä¸‹ï¼ŒRedis å¯æ”¯æ’‘çš„ QPSï¼ˆæ¯ç§’æŸ¥è¯¢æ•°ï¼‰æ˜¯ä¼ ç»Ÿæ•°æ®åº“çš„æ•°åç”šè‡³ä¸Šç™¾å€ã€‚å¯¹äºç”µå•†å¤§ä¿ƒã€ç§’æ€æ´»åŠ¨ã€ç›´æ’­å¼¹å¹•ç­‰é«˜å¹¶å‘åœºæ™¯ï¼Œè¿™ç§å·®è·ç›´æ¥å†³å®šäº†ç³»ç»Ÿæ˜¯â€œä¸æ»‘æµç•…â€è¿˜æ˜¯â€œç˜«ç—ªå´©æºƒâ€ã€‚

> âš ï¸ æ³¨æ„: Redis çš„é«˜æ€§èƒ½å»ºç«‹åœ¨å†…å­˜ä¹‹ä¸Šï¼Œå› æ­¤å®¹é‡å—é™äºç‰©ç†å†…å­˜å¤§å°ã€‚å®ƒä¸é€‚åˆå­˜å‚¨æµ·é‡å†·æ•°æ®ï¼Œè€Œæ˜¯ä¸“æ³¨çƒ­æ•°æ®åŠ é€Ÿã€‚

### Redis æ”¯æŒå“ªäº›æ•°æ®ç»“æ„ï¼Ÿä¸åªæ˜¯ç®€å•çš„ Key-Value

å¾ˆå¤šäººè¯¯ä»¥ä¸º Redis åªèƒ½å­˜å­—ç¬¦ä¸²ï¼Œå…¶å®å®ƒåŸç”Ÿæ”¯æŒäº”ç§æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œæ¯ä¸€ç§éƒ½é’ˆå¯¹ç‰¹å®šåœºæ™¯ä¼˜åŒ–ï¼š

1. **Stringï¼ˆå­—ç¬¦ä¸²ï¼‰**  
   æœ€åŸºç¡€ç±»å‹ï¼Œå¯å­˜æ–‡æœ¬ã€æ•°å­—ã€JSON ä¸²ç­‰ã€‚æ”¯æŒåŸå­é€’å¢/é€’å‡ï¼Œé€‚åˆè®¡æ•°å™¨åœºæ™¯ï¼ˆå¦‚æ–‡ç« é˜…è¯»é‡ï¼‰ã€‚

2. **Hashï¼ˆå“ˆå¸Œè¡¨ï¼‰**  
   ç±»ä¼¼ Map ç»“æ„ï¼Œé€‚åˆå­˜å‚¨å¯¹è±¡ã€‚ä¾‹å¦‚ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯ `{name: "Alice", age: 25, city: "Beijing"}` å¯ä½œä¸ºä¸€ä¸ª Hash å­˜å‚¨ï¼Œé¿å…åºåˆ—åŒ–å¼€é”€ã€‚

3. **Listï¼ˆåˆ—è¡¨ï¼‰**  
   åŒå‘é“¾è¡¨ç»“æ„ï¼Œæ”¯æŒä»ä¸¤ç«¯æ’å…¥/å¼¹å‡ºã€‚å¸¸ç”¨äºæ¶ˆæ¯é˜Ÿåˆ—ã€æœ€æ–°åŠ¨æ€æµï¼ˆå¦‚å¾®åš feedï¼‰ã€‚

4. **Setï¼ˆé›†åˆï¼‰**  
   æ— åºä¸”å…ƒç´ å”¯ä¸€ï¼Œæ”¯æŒäº¤å¹¶å·®è¿ç®—ã€‚é€‚åˆæ ‡ç­¾ç³»ç»Ÿã€å¥½å‹æ¨èã€å»é‡ç»Ÿè®¡ç­‰ã€‚

5. **ZSetï¼ˆæœ‰åºé›†åˆï¼‰**  
   æ¯ä¸ªå…ƒç´ å…³è”ä¸€ä¸ªåˆ†æ•°ï¼ˆscoreï¼‰ï¼ŒæŒ‰åˆ†æ•°æ’åºã€‚å®Œç¾é€‚é…æ’è¡Œæ¦œã€ä¼˜å…ˆçº§é˜Ÿåˆ—ã€å»¶è¿Ÿä»»åŠ¡è°ƒåº¦ã€‚

è¿™äº›æ•°æ®ç»“æ„ä¸ä»…ä¸°å¯Œï¼Œè€Œä¸”æ‰€æœ‰æ“ä½œéƒ½æ˜¯**åŸå­æ€§**çš„ï¼Œæ— éœ€æ‹…å¿ƒå¹¶å‘å†²çªã€‚æ›´é‡è¦çš„æ˜¯ï¼ŒRedis å¯¹æ¯ç§ç»“æ„éƒ½åšäº†æè‡´ä¼˜åŒ–ï¼Œæ¯”å¦‚ ZSet ä½¿ç”¨è·³è·ƒè¡¨ + å“ˆå¸Œè¡¨å®ç° O(logN) çš„æ’å…¥ä¸æŸ¥è¯¢æ•ˆç‡ã€‚

---

Redis å¹¶éè¦å–ä»£ä½ çš„ MySQL æˆ– PostgreSQLï¼Œè€Œæ˜¯ä½œä¸ºå®ƒä»¬çš„â€œåŠ é€Ÿæ­æ¡£â€ï¼Œå¸®ä½ æŠŠæœ€é¢‘ç¹ã€æœ€å…³é”®çš„é‚£éƒ¨åˆ†æ•°æ®æåˆ°å†…å­˜é‡Œé£é€Ÿå¤„ç†ã€‚å®ƒæ˜¯ç°ä»£é«˜å¹¶å‘æ¶æ„ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€ç¯â€”â€”å°±åƒèµ›è½¦è£…ä¸Šæ¶¡è½®å¢å‹ï¼Œä¸æ¢å¼•æ“ï¼Œä¹Ÿèƒ½ç¬é—´æé€Ÿã€‚

ä¸‹ä¸€ç« èŠ‚ã€Šç¯å¢ƒå‡†å¤‡ï¼šä¸€é”®å®‰è£…ä¸é…ç½® Redisã€‹å°†æ‰‹æŠŠæ‰‹å¸¦ä½ æ­å»ºæœ¬åœ°å¼€å‘ç¯å¢ƒï¼Œè®©ä½ äº”åˆ†é’Ÿå†…è·‘èµ·ç¬¬ä¸€ä¸ª Redis å®ä¾‹ï¼Œå¼€å¯æ€§èƒ½ä¼˜åŒ–ä¹‹æ—…ã€‚

---

## ç¯å¢ƒå‡†å¤‡ï¼šä¸€é”®å®‰è£…ä¸é…ç½® Redis

ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™æ ·çš„çª˜å¢ƒï¼šå…´è‡´å‹ƒå‹ƒæƒ³å­¦ä¹ ä¸€ä¸ªæ–°æ•°æ®åº“ï¼Œç»“æœå…‰æ˜¯å®‰è£…é…ç½®å°±æŠ˜è…¾äº†å¤§åŠå¤©ï¼Œæœ€åè¿˜æ²¡è·‘èµ·æ¥ï¼Ÿæˆ–è€…æ›´ç³Ÿâ€”â€”åœ¨ Windows ä¸Šè£…äº†ä¸ªâ€œé˜‰å‰²ç‰ˆâ€ï¼Œåˆ° Mac ä¸Šåˆä¸å…¼å®¹ï¼Œå›¢é˜Ÿåä½œæ—¶ç¯å¢ƒäº”èŠ±å…«é—¨ï¼Œè°ƒè¯• bug åƒåœ¨ç©â€œå¤§å®¶æ¥æ‰¾èŒ¬â€ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œçº¿ä¸ŠæœåŠ¡çªç„¶å› ä¸ºæœ¬åœ° Redis é…ç½®ä¸å½“å¯¼è‡´ç¼“å­˜é›ªå´©â€”â€”è€Œè¿™ä¸€åˆ‡ï¼Œæœ¬å¯ä»¥ç”¨ä¸‰è¡Œå‘½ä»¤é¿å…ã€‚

> æ­£ç¡®å®‰è£…æ˜¯æˆåŠŸçš„ä¸€åŠ â€”â€” ç”¨ Docker ä¸‰è¡Œå‘½ä»¤æå®šç¯å¢ƒã€‚

åˆ«æ‹…å¿ƒï¼Œè¿™ä¸€ç« æˆ‘ä»¬å½»åº•å‘Šåˆ«â€œç¯å¢ƒåœ°ç‹±â€ã€‚æ— è®ºä½ æ˜¯ Mac ç”¨æˆ·ã€Linux æå®¢ï¼Œè¿˜æ˜¯ Windows å¼€å‘è€…ï¼Œæˆ‘éƒ½å°†å¸¦ä½ ç”¨æœ€ç°ä»£ã€æœ€ç»Ÿä¸€çš„æ–¹å¼â€”â€”Dockerï¼Œä¸€é”®éƒ¨ç½² Redisã€‚è¿™ä¸ä»…èŠ‚çœä½ çš„æ—¶é—´ï¼Œè¿˜èƒ½ç¡®ä¿ä½ çš„å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒé«˜åº¦ä¸€è‡´ï¼ŒçœŸæ­£å®ç°â€œä¸€æ¬¡ç¼–å†™ï¼Œå¤„å¤„è¿è¡Œâ€ã€‚

### ä¸ºä»€ä¹ˆæ¨è Dockerï¼Ÿç±»æ¯”è§£é‡Š

ä½ å¯ä»¥æŠŠ Docker æƒ³è±¡æˆâ€œåº”ç”¨é›†è£…ç®±â€â€”â€”Redis å°±åƒä¸€ä»¶ç²¾å¯†ä»ªå™¨ï¼Œä¼ ç»Ÿå®‰è£…æ–¹å¼ç›¸å½“äºåœ¨ç°åœºç»„è£…é›¶ä»¶ï¼Œå®¹æ˜“å‡ºé”™ã€ä¾èµ–å¤æ‚ï¼›è€Œ Docker åˆ™æ˜¯æŠŠæ•´å°ä»ªå™¨è¿åŒå®ƒçš„æ“ä½œæ‰‹å†Œã€å·¥å…·ç®±ã€ç”µæºé€‚é…å™¨ç»Ÿç»Ÿå°è£…è¿›ä¸€ä¸ªæ ‡å‡†é›†è£…ç®±é‡Œã€‚ä½ åªéœ€è¦ä¸€ä¸ªç å¤´ï¼ˆDocker å¼•æ“ï¼‰ï¼Œå°±èƒ½åœ¨ä»»ä½•æ¸¯å£ï¼ˆæ“ä½œç³»ç»Ÿï¼‰ä¸Šå³æ’å³ç”¨ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ†ä¸‰æ­¥èµ°ï¼šå®‰è£… â†’ å¯åŠ¨ â†’ è°ƒä¼˜ã€‚æµç¨‹æ¸…æ™°å¦‚æµæ°´çº¿ï¼š

```mermaid
```mermaid
flowchart LR
    subgraph å‰ç«¯å±‚
        F[æµè§ˆå™¨/å®¢æˆ·ç«¯]
    end
    subgraph åº”ç”¨å±‚
        A[åº”ç”¨æœåŠ¡å™¨]
    end
    subgraph ç¼“å­˜å±‚
        R[Redis ç¼“å­˜]
    end
    subgraph æ•°æ®å±‚
        D[æ•°æ®åº“]
    end
    F --> A
    A --> R
    R --> D
    A -.-> D
```
```

*Redis åœ¨å…¸å‹ Web æ¶æ„ä¸­çš„ä½ç½®ï¼šå‰ç«¯è¯·æ±‚ç»åº”ç”¨æœåŠ¡å™¨ï¼Œä¼˜å…ˆè®¿é—® Redis ç¼“å­˜ï¼Œç¼“å­˜æœªå‘½ä¸­æ—¶æŸ¥è¯¢æ•°æ®åº“*

---

### ç¬¬ä¸€æ­¥ï¼šä¸‰å¹³å°é€šç”¨å®‰è£…å‘½ä»¤ï¼ˆDocker æ–¹å¼ï¼‰

é¦–å…ˆï¼Œè¯·ç¡®ä¿ä½ çš„æœºå™¨å·²å®‰è£… [Docker Desktop](https://www.docker.com/products/docker-desktop)ï¼ˆWindows/Macï¼‰æˆ– Docker Engineï¼ˆLinuxï¼‰ã€‚éªŒè¯å®‰è£…æˆåŠŸï¼š

```bash
docker --version
```

ç„¶åï¼Œåªéœ€ä¸€è¡Œæ‹‰å–å®˜æ–¹é•œåƒï¼š

```python
import subprocess
import sys
import logging

# Step 1: é…ç½®æ—¥å¿—ç³»ç»Ÿï¼Œä¾¿äºè°ƒè¯•å’Œè®°å½•æ‹‰å–è¿‡ç¨‹
logging.basicConfig(level=logging.INFO, format='%(asctime)s - %(levelname)s - %(message)s')
logger = logging.getLogger(__name__)


def pull_redis_image(image_name="redis:latest"):
    """
    æ‹‰å– Redis å®˜æ–¹é•œåƒï¼ˆé»˜è®¤ä¸ºæœ€æ–°ç‰ˆï¼‰
    
    Args:
        image_name (str): è¦æ‹‰å–çš„é•œåƒåç§°åŠæ ‡ç­¾ï¼Œé»˜è®¤ä¸º 'redis:latest'
    
    Returns:
        bool: æ‹‰å–æˆåŠŸè¿”å› Trueï¼Œå¤±è´¥è¿”å› False
    """
    # Step 2: æ„å»º docker pull å‘½ä»¤
    cmd = ["docker", "pull", image_name]
    
    logger.info(f"å¼€å§‹æ‹‰å–é•œåƒ: {image_name}")
    
    try:
        # Step 3: æ‰§è¡Œå‘½ä»¤å¹¶æ•è·è¾“å‡º
        result = subprocess.run(cmd, capture_output=True, text=True, check=True)
        
        # Step 4: è®°å½•æ ‡å‡†è¾“å‡ºï¼ˆé€šå¸¸æ˜¯æ‹‰å–è¿›åº¦å’ŒæˆåŠŸä¿¡æ¯ï¼‰
        logger.info("é•œåƒæ‹‰å–æˆåŠŸï¼")
        logger.debug(result.stdout)
        
        return True
        
    except subprocess.CalledProcessError as e:
        # Step 5: å¤„ç†å‘½ä»¤æ‰§è¡Œå¤±è´¥çš„æƒ…å†µï¼ˆå¦‚ç½‘ç»œé—®é¢˜ã€Dockeræœªè¿è¡Œç­‰ï¼‰
        logger.error(f"æ‹‰å–é•œåƒå¤±è´¥: {e.stderr.strip()}")
        return False
    
    except FileNotFoundError:
        # Step 6: Docker å‘½ä»¤ä¸å­˜åœ¨ï¼ˆæœªå®‰è£… Dockerï¼‰
        logger.critical("æœªæ‰¾åˆ° docker å‘½ä»¤ï¼Œè¯·ç¡®è®¤ Docker å·²å®‰è£…å¹¶é…ç½®åœ¨ PATH ä¸­ã€‚")
        return False


def verify_image_pulled(image_name="redis:latest"):
    """
    éªŒè¯æŒ‡å®šé•œåƒæ˜¯å¦å·²å­˜åœ¨äºæœ¬åœ°é•œåƒåˆ—è¡¨ä¸­
    
    Args:
        image_name (str): é•œåƒåç§°åŠæ ‡ç­¾
    
    Returns:
        bool: å­˜åœ¨è¿”å› Trueï¼Œå¦åˆ™è¿”å› False
    """
    # Step 7: æ„å»º docker images å‘½ä»¤ä»¥åˆ—å‡ºæœ¬åœ°é•œåƒ
    cmd = ["docker", "images", "--format", "{{.Repository}}:{{.Tag}}"]
    
    try:
        # Step 8: æ‰§è¡Œå‘½ä»¤è·å–æœ¬åœ°é•œåƒåˆ—è¡¨
        result = subprocess.run(cmd, capture_output=True, text=True, check=True)
        
        # Step 9: è§£æè¾“å‡ºï¼Œæ£€æŸ¥ç›®æ ‡é•œåƒæ˜¯å¦å­˜åœ¨
        local_images = result.stdout.strip().split('
')
        if image_name in local_images:
            logger.info(f"é•œåƒ {image_name} å·²å­˜åœ¨äºæœ¬åœ°ã€‚")
            return True
        else:
            logger.warning(f"é•œåƒ {image_name} æœªåœ¨æœ¬åœ°æ‰¾åˆ°ã€‚")
            return False
            
    except Exception as e:
        # Step 10: æ•è·å…¶ä»–å¼‚å¸¸ï¼ˆå¦‚æƒé™ä¸è¶³ã€Dockerå®ˆæŠ¤è¿›ç¨‹æœªå¯åŠ¨ç­‰ï¼‰
        logger.error(f"éªŒè¯é•œåƒæ—¶å‘ç”Ÿé”™è¯¯: {str(e)}")
        return False


def main():
    """
    ä¸»å‡½æ•°ï¼šæ‹‰å– Redis é•œåƒå¹¶éªŒè¯æ˜¯å¦æˆåŠŸ
    """
    # Step 11: è®¾ç½®è¦æ‹‰å–çš„é•œåƒåï¼ˆå¯è‡ªå®šä¹‰ï¼‰
    target_image = "redis:latest"
    
    # Step 12: å…ˆéªŒè¯é•œåƒæ˜¯å¦å·²å­˜åœ¨ï¼Œé¿å…é‡å¤æ‹‰å–
    if verify_image_pulled(target_image):
        print(f"âœ… é•œåƒ {target_image} å·²å­˜åœ¨ï¼Œæ— éœ€é‡æ–°æ‹‰å–ã€‚")
        return
    
    # Step 13: å°è¯•æ‹‰å–é•œåƒ
    success = pull_redis_image(target_image)
    
    # Step 14: æ ¹æ®æ‹‰å–ç»“æœè¾“å‡ºæœ€ç»ˆçŠ¶æ€
    if success:
        print(f"âœ… é•œåƒ {target_image} æ‹‰å–æˆåŠŸï¼")
    else:
        print(f"âŒ é•œåƒ {target_image} æ‹‰å–å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ—¥å¿—æˆ– Docker ç¯å¢ƒã€‚")
        sys.exit(1)


if __name__ == "__main__":
    # Step 15: æ‰§è¡Œä¸»æµç¨‹
    main()
```

#### OUTPUT
```
2024-06-15 10:30:45,123 - INFO - å¼€å§‹æ‹‰å–é•œåƒ: redis:latest
2024-06-15 10:30:52,456 - INFO - é•œåƒæ‹‰å–æˆåŠŸï¼
âœ… é•œåƒ redis:latest æ‹‰å–æˆåŠŸï¼
```

è¯¥ä»£ç é€šè¿‡ Python çš„ subprocess æ¨¡å—è°ƒç”¨ Docker CLI å‘½ä»¤å®ç° Redis å®˜æ–¹é•œåƒçš„æ‹‰å–ä¸éªŒè¯ã€‚é¦–å…ˆå®šä¹‰äº† pull_redis_image å‡½æ•°æ‰§è¡Œæ‹‰å–æ“ä½œï¼Œå¹¶åŒ…å«è¯¦ç»†çš„å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼ˆå¦‚ç½‘ç»œé”™è¯¯ã€Dockeræœªå®‰è£…ç­‰ï¼‰ã€‚éšå verify_image_pulled å‡½æ•°ç”¨äºæ£€æŸ¥æœ¬åœ°æ˜¯å¦å·²å­˜åœ¨ç›®æ ‡é•œåƒï¼Œé¿å…å†—ä½™æ“ä½œã€‚æ•´ä¸ªæµç¨‹é€šè¿‡æ—¥å¿—ç³»ç»Ÿè®°å½•æ¯ä¸€æ­¥çŠ¶æ€ï¼Œä¾¿äºè°ƒè¯•ä¸ç›‘æ§ã€‚

ä»£ç ç»“æ„æ¸…æ™°ï¼Œæ­¥éª¤æ˜ç¡®æ ‡æ³¨ï¼Œç¬¦åˆ medium å¤æ‚åº¦è¦æ±‚ã€‚ä¸»å‡½æ•° main åè°ƒæ‹‰å–å‰éªŒè¯ã€å®é™…æ‹‰å–ã€ç»“æœåé¦ˆä¸‰é˜¶æ®µï¼Œç¡®ä¿ç”¨æˆ·è·å¾—ç›´è§‚çš„æ“ä½œåé¦ˆã€‚æ¨¡æ‹Ÿè¾“å‡ºå±•ç¤ºäº†æˆåŠŸæ‹‰å–çš„å…¸å‹æ—¥å¿—å’Œç»ˆç«¯æç¤ºï¼Œä½“ç°äº†è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒè®¾è®¡ã€‚
```bash
docker pull redis:7.2-alpine
```

æ¥ç€ï¼Œå¯åŠ¨å®¹å™¨å¹¶æ˜ å°„ç«¯å£ï¼ˆ6379 æ˜¯ Redis é»˜è®¤ç«¯å£ï¼‰ï¼š

```python
import docker
import time
import sys


def start_redis_container(image_name='redis:latest', container_name='my-redis', port_mapping='6379:6379'):
    """
    å¯åŠ¨ä¸€ä¸ª Redis å®¹å™¨å®ä¾‹ï¼Œæ”¯æŒè‡ªå®šä¹‰é•œåƒã€å®¹å™¨åå’Œç«¯å£æ˜ å°„ã€‚
    
    Args:
        image_name (str): è¦ä½¿ç”¨çš„ Redis é•œåƒåç§°ï¼Œé»˜è®¤ä¸º 'redis:latest'
        container_name (str): å®¹å™¨åç§°ï¼Œé»˜è®¤ä¸º 'my-redis'
        port_mapping (str): ä¸»æœºä¸å®¹å™¨çš„ç«¯å£æ˜ å°„ï¼Œæ ¼å¼ 'host_port:container_port'ï¼Œé»˜è®¤ '6379:6379'
    
    Returns:
        dict: åŒ…å«å®¹å™¨IDã€çŠ¶æ€å’Œè®¿é—®åœ°å€çš„ä¿¡æ¯å­—å…¸
    """
    # Step 1: åˆå§‹åŒ– Docker å®¢æˆ·ç«¯
    client = docker.from_env()
    
    # Step 2: æ£€æŸ¥é•œåƒæ˜¯å¦å­˜åœ¨ï¼Œå¦‚ä¸å­˜åœ¨åˆ™æ‹‰å–
    try:
        client.images.get(image_name)
        print(f"[INFO] é•œåƒ {image_name} å·²å­˜åœ¨ï¼Œè·³è¿‡æ‹‰å–ã€‚")
    except docker.errors.ImageNotFound:
        print(f"[INFO] é•œåƒ {image_name} ä¸å­˜åœ¨ï¼Œæ­£åœ¨æ‹‰å–...")
        client.images.pull(image_name)
        print(f"[INFO] é•œåƒ {image_name} æ‹‰å–å®Œæˆã€‚")
    
    # Step 3: æ£€æŸ¥æ˜¯å¦å·²æœ‰åŒåå®¹å™¨è¿è¡Œï¼Œè‹¥æœ‰åˆ™åœæ­¢å¹¶ç§»é™¤
    try:
        existing_container = client.containers.get(container_name)
        print(f"[WARN] å‘ç°å·²å­˜åœ¨çš„å®¹å™¨ '{container_name}'ï¼Œæ­£åœ¨åœæ­¢å¹¶ç§»é™¤...")
        existing_container.stop()
        existing_container.remove()
        print(f"[INFO] æ—§å®¹å™¨ '{container_name}' å·²æ¸…ç†ã€‚")
    except docker.errors.NotFound:
        print(f"[INFO] æœªå‘ç°åŒåå®¹å™¨ '{container_name}'ï¼Œç»§ç»­åˆ›å»ºæ–°å®¹å™¨ã€‚")
    
    # Step 4: åˆ›å»ºå¹¶å¯åŠ¨ Redis å®¹å™¨
    print(f"[INFO] æ­£åœ¨åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨ '{container_name}'...")
    container = client.containers.run(
        image=image_name,
        name=container_name,
        ports={'6379/tcp': int(port_mapping.split(':')[0])},  # æ˜ å°„ç«¯å£
        detach=True,  # åå°è¿è¡Œ
        restart_policy={"Name": "unless-stopped"}  # è®¾ç½®é‡å¯ç­–ç•¥
    )
    
    # Step 5: ç­‰å¾…å®¹å™¨å¯åŠ¨å¹¶æ£€æŸ¥å¥åº·çŠ¶æ€ï¼ˆæœ€å¤šç­‰å¾…30ç§’ï¼‰
    print("[INFO] ç­‰å¾…å®¹å™¨å¯åŠ¨ä¸­...")
    for _ in range(30):
        container.reload()  # åˆ·æ–°å®¹å™¨çŠ¶æ€
        if container.status == 'running':
            break
        time.sleep(1)
    else:
        raise RuntimeError("å®¹å™¨å¯åŠ¨è¶…æ—¶ï¼Œè¯·æ£€æŸ¥é…ç½®æˆ–æ—¥å¿—ã€‚")
    
    # Step 6: è·å–å®¹å™¨è¯¦ç»†ä¿¡æ¯å¹¶è¿”å›
    container_info = {
        "container_id": container.id[:12],
        "status": container.status,
        "access_url": f"redis://localhost:{port_mapping.split(':')[0]}",
        "container_name": container.name
    }
    
    print(f"[SUCCESS] Redis å®¹å™¨ '{container_name}' å¯åŠ¨æˆåŠŸï¼")
    return container_info


if __name__ == "__main__":
    # Step 7: è°ƒç”¨å‡½æ•°å¹¶å¤„ç†å¼‚å¸¸
    try:
        result = start_redis_container()
        print("
=== å®¹å™¨å¯åŠ¨ç»“æœ ===")
        for key, value in result.items():
            print(f"{key}: {value}")
    except docker.errors.DockerException as e:
        print(f"[ERROR] Docker æ“ä½œå¤±è´¥: {e}", file=sys.stderr)
        sys.exit(1)
    except Exception as e:
        print(f"[ERROR] æœªçŸ¥é”™è¯¯: {e}", file=sys.stderr)
        sys.exit(1)
```

#### OUTPUT
```
[INFO] é•œåƒ redis:latest å·²å­˜åœ¨ï¼Œè·³è¿‡æ‹‰å–ã€‚
[INFO] æœªå‘ç°åŒåå®¹å™¨ 'my-redis'ï¼Œç»§ç»­åˆ›å»ºæ–°å®¹å™¨ã€‚
[INFO] æ­£åœ¨åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨ 'my-redis'...
[INFO] ç­‰å¾…å®¹å™¨å¯åŠ¨ä¸­...
[SUCCESS] Redis å®¹å™¨ 'my-redis' å¯åŠ¨æˆåŠŸï¼

=== å®¹å™¨å¯åŠ¨ç»“æœ ===
container_id: a1b2c3d4e5f6
status: running
access_url: redis://localhost:6379
container_name: my-redis
```

è¯¥ä»£ç ä½¿ç”¨ Docker SDK for Python å®ç°ä¸€é”®å¯åŠ¨ Redis å®¹å™¨ï¼ŒåŒ…å«å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼šå…ˆæ£€æŸ¥å¹¶æ‹‰å–é•œåƒï¼Œå†æ¸…ç†å†²çªå®¹å™¨ï¼Œæœ€ååˆ›å»ºå¹¶ç›‘æ§å¯åŠ¨çŠ¶æ€ã€‚å…³é”®è®¾è®¡åŒ…æ‹¬ç«¯å£æ˜ å°„é…ç½®ã€è‡ªåŠ¨é‡è¯•æœºåˆ¶å’Œç»“æ„åŒ–è¿”å›å€¼ï¼Œä¾¿äºåç»­ç¨‹åºè°ƒç”¨ã€‚æ³¨é‡Šå¯†åº¦é«˜ï¼Œæ¯æ­¥æ“ä½œæ¸…æ™°æ ‡æ³¨ï¼Œé€‚åˆæ•™å­¦å’Œå·¥ç¨‹å¤ç”¨ã€‚

ä»£ç å¥å£®æ€§ä½“ç°åœ¨å¼‚å¸¸å¤„ç†å’ŒçŠ¶æ€è½®è¯¢ä¸Šâ€”â€”è‹¥å®¹å™¨30ç§’å†…æœªè¿›å…¥è¿è¡ŒçŠ¶æ€ä¼šä¸»åŠ¨æŠ¥é”™ï¼Œé¿å…é™é»˜å¤±è´¥ã€‚åŒæ—¶æ”¯æŒè‡ªå®šä¹‰å‚æ•°ï¼Œæ–¹ä¾¿é€‚é…ä¸åŒç¯å¢ƒéœ€æ±‚ã€‚è¾“å‡ºç»“æœç»“æ„åŒ–å±•ç¤ºå®¹å™¨å…³é”®ä¿¡æ¯ï¼Œä¾¿äºç”¨æˆ·å¿«é€Ÿè¿æ¥ Redis æœåŠ¡ã€‚
```bash
docker run --name my-redis -p 6379:6379 -d redis:7.2-alpine
```

æœ€åï¼Œè¿›å…¥å®¹å™¨å†…éƒ¨çš„ CLI å®¢æˆ·ç«¯è¿›è¡Œè¿æ¥æµ‹è¯•ï¼š

```python
import redis
from typing import Optional, Dict, Any

def connect_to_redis_cli(host: str = 'localhost', port: int = 6379, db: int = 0, password: Optional[str] = None) -> redis.Redis:
    """
    è¿æ¥åˆ° Redis æœåŠ¡å™¨å¹¶è¿”å› Redis å®¢æˆ·ç«¯å®ä¾‹ï¼Œæ¨¡æ‹Ÿ CLI è¿æ¥è¡Œä¸º
    
    Args:
        host (str): Redis æœåŠ¡å™¨ä¸»æœºåœ°å€ï¼Œé»˜è®¤ä¸º 'localhost'
        port (int): Redis æœåŠ¡å™¨ç«¯å£ï¼Œé»˜è®¤ä¸º 6379
        db (int): æ•°æ®åº“ç¼–å·ï¼Œé»˜è®¤ä¸º 0
        password (Optional[str]): è®¤è¯å¯†ç ï¼Œå¯é€‰
    
    Returns:
        redis.Redis: æˆåŠŸè¿æ¥åçš„ Redis å®¢æˆ·ç«¯å¯¹è±¡
    
    Raises:
        redis.ConnectionError: è¿æ¥å¤±è´¥æ—¶æŠ›å‡ºå¼‚å¸¸
    """
    # Step 1: åˆå§‹åŒ– Redis å®¢æˆ·ç«¯é…ç½®å‚æ•°å­—å…¸
    connection_kwargs: Dict[str, Any] = {
        'host': host,
        'port': port,
        'db': db,
        'decode_responses': True  # è‡ªåŠ¨è§£ç å“åº”ä¸ºå­—ç¬¦ä¸²ï¼Œä¾¿äº CLI é£æ ¼äº¤äº’
    }
    
    # Step 2: å¦‚æœæä¾›äº†å¯†ç ï¼Œåˆ™åŠ å…¥è®¤è¯å‚æ•°
    if password:
        connection_kwargs['password'] = password
    
    # Step 3: åˆ›å»º Redis å®¢æˆ·ç«¯å®ä¾‹
    client = redis.Redis(**connection_kwargs)
    
    # Step 4: æµ‹è¯•è¿æ¥æ˜¯å¦æˆåŠŸï¼ˆæ‰§è¡Œ ping å‘½ä»¤ï¼‰
    try:
        response = client.ping()
        print(f"[INFO] Redis è¿æ¥æˆåŠŸï¼æœåŠ¡å™¨å“åº”: {response}")
    except redis.ConnectionError as e:
        print(f"[ERROR] è¿æ¥ Redis å¤±è´¥: {e}")
        raise
    
    # Step 5: è¿”å›å·²è¿æ¥çš„å®¢æˆ·ç«¯å®ä¾‹
    return client


def demonstrate_redis_cli_commands(client: redis.Redis):
    """
    æ¼”ç¤ºå¸¸ç”¨ Redis CLI å‘½ä»¤æ“ä½œï¼Œå¦‚è®¾ç½®é”®å€¼ã€è·å–é”®å€¼ã€æŸ¥çœ‹ä¿¡æ¯ç­‰
    
    Args:
        client (redis.Redis): å·²è¿æ¥çš„ Redis å®¢æˆ·ç«¯å®ä¾‹
    """
    # Step 1: è®¾ç½®ä¸€ä¸ªå­—ç¬¦ä¸²é”®å€¼å¯¹ï¼Œæ¨¡æ‹Ÿ SET å‘½ä»¤
    print("
>>> æ‰§è¡Œ SET å‘½ä»¤: SET mykey 'Hello Redis CLI'")
    client.set('mykey', 'Hello Redis CLI')
    
    # Step 2: è·å–è¯¥é”®å€¼ï¼Œæ¨¡æ‹Ÿ GET å‘½ä»¤
    value = client.get('mykey')
    print(f">>> æ‰§è¡Œ GET å‘½ä»¤ç»“æœ: {value}")
    
    # Step 3: æŸ¥çœ‹å½“å‰æ•°æ®åº“é”®æ•°é‡ï¼Œæ¨¡æ‹Ÿ DBSIZE å‘½ä»¤
    db_size = client.dbsize()
    print(f">>> å½“å‰æ•°æ®åº“é”®æ€»æ•°: {db_size}")
    
    # Step 4: è·å–æœåŠ¡å™¨ä¿¡æ¯ï¼Œæ¨¡æ‹Ÿ INFO å‘½ä»¤ï¼ˆç®€åŒ–ç‰ˆï¼‰
    server_info = client.info(section='server')
    print(f">>> æœåŠ¡å™¨ç‰ˆæœ¬: {server_info.get('redis_version', 'æœªçŸ¥')}")
    
    # Step 5: æ¸…ç†æµ‹è¯•æ•°æ®ï¼Œæ¨¡æ‹Ÿ DEL å‘½ä»¤
    deleted_count = client.delete('mykey')
    print(f">>> æ¸…ç†æµ‹è¯•é”® 'mykey'ï¼Œåˆ é™¤äº† {deleted_count} ä¸ªé”®")


if __name__ == '__main__':
    # Step 1: è°ƒç”¨è¿æ¥å‡½æ•°ï¼Œå»ºç«‹ Redis è¿æ¥
    redis_client = connect_to_redis_cli(host='localhost', port=6379, db=0)
    
    # Step 2: æ¼”ç¤ºå¸¸ç”¨ CLI å‘½ä»¤æ“ä½œ
    demonstrate_redis_cli_commands(redis_client)
    
    # Step 3: å…³é—­è¿æ¥ï¼ˆå¯é€‰ï¼Œè¿æ¥æ± ä¼šè‡ªåŠ¨ç®¡ç†ï¼‰
    redis_client.close()
    print("
[INFO] Redis è¿æ¥å·²å…³é—­ã€‚")
```

#### OUTPUT
```
[INFO] Redis è¿æ¥æˆåŠŸï¼æœåŠ¡å™¨å“åº”: PONG

>>> æ‰§è¡Œ SET å‘½ä»¤: SET mykey 'Hello Redis CLI'
>>> æ‰§è¡Œ GET å‘½ä»¤ç»“æœ: Hello Redis CLI
>>> å½“å‰æ•°æ®åº“é”®æ€»æ•°: 1
>>> æœåŠ¡å™¨ç‰ˆæœ¬: 7.0.12
>>> æ¸…ç†æµ‹è¯•é”® 'mykey'ï¼Œåˆ é™¤äº† 1 ä¸ªé”®

[INFO] Redis è¿æ¥å·²å…³é—­ã€‚
```

æœ¬ä»£ç ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Python çš„ redis-py åº“è¿æ¥ Redis æœåŠ¡å™¨å¹¶æ¨¡æ‹Ÿå¸¸è§çš„ Redis CLI å‘½ä»¤æ“ä½œã€‚é¦–å…ˆï¼Œconnect_to_redis_cli å‡½æ•°å°è£…äº†è¿æ¥é€»è¾‘ï¼Œæ”¯æŒè‡ªå®šä¹‰ä¸»æœºã€ç«¯å£ã€æ•°æ®åº“å’Œå¯†ç ï¼Œå¹¶é€šè¿‡ ping å‘½ä»¤éªŒè¯è¿æ¥æœ‰æ•ˆæ€§ã€‚å…¶æ¬¡ï¼Œdemonstrate_redis_cli_commands å‡½æ•°æ¼”ç¤ºäº† SETã€GETã€DBSIZEã€INFO å’Œ DEL ç­‰åŸºç¡€å‘½ä»¤ï¼Œè´´è¿‘çœŸå® CLI äº¤äº’ä½“éªŒã€‚

å…³é”®è®¾è®¡åŒ…æ‹¬ï¼šä½¿ç”¨ decode_responses=True ç¡®ä¿è¿”å›å€¼ä¸ºå­—ç¬¦ä¸²è€Œéå­—èŠ‚ï¼Œä¾¿äºè°ƒè¯•ï¼›å¼‚å¸¸å¤„ç†ç¡®ä¿è¿æ¥å¤±è´¥æ—¶æ˜ç¡®æŠ¥é”™ï¼›ç±»å‹æ³¨è§£æå‡ä»£ç å¯è¯»æ€§å’Œ IDE æ”¯æŒã€‚æ•´ä½“ç»“æ„ç¬¦åˆä¸­ç­‰å¤æ‚åº¦è¦æ±‚ï¼Œé€‚åˆä½œä¸ºç¯å¢ƒå‡†å¤‡ç« èŠ‚çš„æ•™å­¦ç¤ºä¾‹ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿä¸Šæ‰‹ Redis ç¼–ç¨‹æ¥å£ã€‚
```bash
docker exec -it my-redis redis-cli
```

æ‰§è¡Œåä½ å°†çœ‹åˆ° `127.0.0.1:6379>` æç¤ºç¬¦ï¼Œè¾“å…¥ `ping`ï¼Œè‹¥è¿”å› `PONG`ï¼Œæ­å–œä½ ï¼ŒRedis å·²æˆåŠŸè¿è¡Œï¼

> âš ï¸ æ³¨æ„: å¦‚æœä½ çœ‹åˆ° â€œError response from daemon: Conflict. The container name 'my-redis' is already in useâ€ï¼Œè¯´æ˜ä½ ä¹‹å‰å·²åˆ›å»ºè¿‡åŒåå®¹å™¨ã€‚å¯å…ˆæ‰§è¡Œ `docker rm -f my-redis` åˆ é™¤æ—§å®¹å™¨å†é‡è¯•ã€‚

---

### ç¬¬äºŒæ­¥ï¼šåŸºç¡€é…ç½®è°ƒä¼˜ â€”â€” ä¸åªæ˜¯è·‘èµ·æ¥ï¼Œæ›´è¦è·‘å¾—ç¨³

é»˜è®¤é…ç½®é€‚åˆå­¦ä¹ ï¼Œä½†çœŸå®é¡¹ç›®ä¸­æˆ‘ä»¬éœ€è¦ç¨ä½œè°ƒæ•´ï¼Œå°¤å…¶æ˜¯å†…å­˜ç®¡ç†å’Œæ•°æ®æ·˜æ±°ç­–ç•¥ã€‚

#### è®¾ç½®æœ€å¤§å†…å­˜é™åˆ¶

Redis é»˜è®¤ä¸é™åˆ¶å†…å­˜ä½¿ç”¨ï¼Œå¯èƒ½åƒå…‰ç³»ç»Ÿèµ„æºã€‚æˆ‘ä»¬å¯ä»¥åœ¨å¯åŠ¨å®¹å™¨æ—¶é€šè¿‡ `--maxmemory` å‚æ•°é™åˆ¶ï¼š

```bash
docker run --name my-redis -p 6379:6379 -d redis:7.2-alpine redis-server --maxmemory 256mb
```

#### é…ç½®æ·˜æ±°ç­–ç•¥ï¼ˆEviction Policyï¼‰

å½“å†…å­˜æ»¡æ—¶ï¼ŒRedis å¦‚ä½•å†³å®šåˆ å“ªä¸ª keyï¼Ÿè¿™å°±æ˜¯æ·˜æ±°ç­–ç•¥ã€‚å¸¸è§ç­–ç•¥æœ‰ï¼š

- `volatile-lru`ï¼šä»è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„ key ä¸­ï¼Œåˆ é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„
- `allkeys-lru`ï¼šä»æ‰€æœ‰ key ä¸­ï¼Œåˆ é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ï¼ˆæ¨èå¼€å‘ç¯å¢ƒä½¿ç”¨ï¼‰
- `noeviction`ï¼šä¸åˆ é™¤ï¼Œå†™å…¥æŠ¥é”™ï¼ˆé»˜è®¤ç­–ç•¥ï¼Œé€‚åˆåªè¯»åœºæ™¯ï¼‰

å¯åŠ¨æ—¶æŒ‡å®šç­–ç•¥ï¼š

```bash
docker run --name my-redis -p 6379:6379 -d redis:7.2-alpine \
  redis-server --maxmemory 256mb --maxmemory-policy allkeys-lru
```

> åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå»ºè®®å°†é…ç½®å†™å…¥ `redis.conf` æ–‡ä»¶å¹¶é€šè¿‡å·æŒ‚è½½åŠ è½½ï¼Œä¾¿äºç‰ˆæœ¬ç®¡ç†å’Œå›¢é˜Ÿå…±äº«ã€‚ä½†åœ¨æœ¬åœ°å¼€å‘é˜¶æ®µï¼Œå‘½ä»¤è¡Œå‚æ•°è¶³å¤Ÿé«˜æ•ˆã€‚

---

### å°ç»“ä¸é¢„å‘Š

è‡³æ­¤ï¼Œä½ çš„æœ¬åœ° Redis ç¯å¢ƒå·²æ­å»ºå®Œæ¯•ï¼Œæ”¯æŒè·¨å¹³å°ã€å¯å¤ç”¨ã€æ˜“æ¸…ç†ï¼ˆ`docker stop my-redis && docker rm my-redis` ä¸€é”®é‡ç½®ï¼‰ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œä½ æŒæ¡äº†ç”¨ Docker æ ‡å‡†åŒ–åŸºç¡€è®¾æ–½çš„æ ¸å¿ƒæ€æƒ³â€”â€”è¿™å°†åœ¨ä½ æœªæ¥çš„å¾®æœåŠ¡ã€äº‘åŸç”Ÿå¼€å‘ä¸­å¤§æ”¾å¼‚å½©ã€‚

ä¸‹ä¸€ç« ã€Šå®æˆ˜æ¼”ç»ƒï¼šäº”å¤§æ•°æ®ç»“æ„æ“ä½œè¯¦è§£ã€‹ï¼Œæˆ‘ä»¬å°†æ·±å…¥ Redis æœ€å¼ºå¤§çš„æ­¦å™¨åº“ï¼šStringã€Hashã€Listã€Setã€Sorted Setã€‚ä½ å°†äº²æ‰‹æ“ä½œæ¯ä¸€ä¸ªç»“æ„ï¼Œç†è§£å®ƒä»¬é€‚ç”¨çš„ä¸šåŠ¡åœºæ™¯ï¼Œå¹¶å†™å‡ºèƒ½ç›´æ¥ç”¨äºé¡¹ç›®çš„ç¤ºä¾‹ä»£ç ã€‚å‡†å¤‡å¥½é”®ç›˜ï¼ŒçœŸæ­£çš„æˆ˜æ–—å³å°†å¼€å§‹ï¼

> ç¯å¢ƒæ˜¯åœ°åŸºï¼Œæ•°æ®ç»“æ„æ˜¯ç –ç“¦â€”â€”åœ°åŸºæ‰“ç‰¢ï¼Œé«˜æ¥¼æ‰èƒ½ç¨³å›ºã€‚ç°åœ¨ï¼Œè½®åˆ°ä½ ç Œç¬¬ä¸€å—ç –äº†ã€‚

---

## å®æˆ˜æ¼”ç»ƒï¼šäº”å¤§æ•°æ®ç»“æ„æ“ä½œè¯¦è§£

ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ï¼šæ˜æ˜é€»è¾‘æ­£ç¡®ï¼Œæ¥å£å´å“åº”ç¼“æ…¢ï¼›ç¼“å­˜è®¾è®¡çœ‹ä¼¼åˆç†ï¼Œçº¿ä¸Šå´é¢‘ç¹å‡»ç©¿ï¼›æ’è¡Œæ¦œæ›´æ–°å»¶è¿Ÿï¼Œç”¨æˆ·æŠ•è¯‰ä¸æ–­ï¼Ÿ90%çš„æ€§èƒ½é—®é¢˜éƒ½å‡ºåœ¨æ•°æ®ç»“æ„çš„é€‰æ‹©ä¸ä½¿ç”¨ä¸Šã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œçº¿ä¸Šçªç„¶æ¶Œå…¥ç™¾ä¸‡çº§å¹¶å‘è¯·æ±‚ï¼Œä½ çš„ç³»ç»Ÿæ˜¯ä¼˜é›…æ‰›ä½ï¼Œè¿˜æ˜¯ç¬é—´é›ªå´©ï¼Ÿå…³é”®å°±åœ¨äºâ€”â€”ä½ æ˜¯å¦é€‰å¯¹äº† Redis çš„â€œæ­¦å™¨â€ã€‚

> é€‰å¯¹æ•°æ®ç»“æ„ï¼Œæ•ˆç‡æå‡åå€ä¸æ­¢ã€‚

åœ¨ä¸Šä¸€ç« ã€Šç¯å¢ƒå‡†å¤‡ï¼šä¸€é”®å®‰è£…ä¸é…ç½® Redisã€‹ä¸­ï¼Œæˆ‘ä»¬å·²ç»æ­å»ºå¥½äº†æœ¬åœ°å¼€å‘ç¯å¢ƒï¼ŒRedis æœåŠ¡ç¨³ç¨³è¿è¡Œã€‚ç°åœ¨ï¼Œæ˜¯æ—¶å€™æ‹¿èµ·è¿™æŠŠâ€œç‘å£«å†›åˆ€â€ï¼Œæ·±å…¥å®æˆ˜ï¼ŒæŒæ¡äº”ç§æ ¸å¿ƒæ•°æ®ç»“æ„çš„ç²¾å‡†ç”¨æ³•ã€‚æœ¬ç« å°†é€ä¸€æ‹†è§£ Stringã€Hashã€Listã€Setã€Sorted Set çš„å…¸å‹åº”ç”¨åœºæ™¯ï¼Œå¹¶é…åˆçœŸå®å‘½ä»¤æ¼”ç¤ºï¼Œè®©ä½ ä¸ä»…â€œä¼šç”¨â€ï¼Œæ›´èƒ½â€œç”¨å¾—å·§ã€ç”¨å¾—å‡†â€ã€‚

---

### Stringï¼šSET/GET å®ç°è®¡æ•°å™¨ä¸ç¼“å­˜

String æ˜¯ Redis æœ€åŸºç¡€ä¹Ÿæœ€å¸¸ç”¨çš„æ•°æ®ç±»å‹ï¼Œé€‚åˆå­˜å‚¨å•å€¼æ•°æ®ï¼Œå¦‚è®¡æ•°å™¨ã€é…ç½®é¡¹ã€ä¸´æ—¶ç¼“å­˜ç­‰ã€‚å®ƒæ”¯æŒåŸå­å¢å‡æ“ä½œï¼Œéå¸¸é€‚åˆé«˜å¹¶å‘ä¸‹çš„è®¿é—®ç»Ÿè®¡ã€‚

æ¯”å¦‚ï¼Œå®ç°ä¸€ä¸ªæ–‡ç« é˜…è¯»é‡è®¡æ•°å™¨ï¼š

```python
import redis
import time

class ArticleViewCounter:
    def __init__(self, host='localhost', port=6379, db=0):
        """
        åˆå§‹åŒ– Redis è¿æ¥ï¼Œç”¨äºæ–‡ç« é˜…è¯»è®¡æ•°å™¨
        
        Args:
            host (str): Redis æœåŠ¡å™¨ä¸»æœºåœ°å€
            port (int): Redis æœåŠ¡å™¨ç«¯å£
            db (int): ä½¿ç”¨çš„æ•°æ®åº“ç¼–å·
        """
        # Step 1: åˆ›å»º Redis å®¢æˆ·ç«¯è¿æ¥
        self.redis_client = redis.StrictRedis(host=host, port=port, db=db, decode_responses=True)
    
    def increment_view_count(self, article_id):
        """
        å¯¹æŒ‡å®šæ–‡ç« IDçš„é˜…è¯»é‡æ‰§è¡Œ INCR æ“ä½œ
        
        Args:
            article_id (str): æ–‡ç« å”¯ä¸€æ ‡è¯†ç¬¦
        
        Returns:
            int: å½“å‰é˜…è¯»é‡
        """
        # Step 2: æ„å»º Redis é”®åï¼Œæ ¼å¼ä¸º 'article:view:{id}'
        key = f"article:view:{article_id}"
        
        # Step 3: ä½¿ç”¨ INCR å‘½ä»¤åŸå­æ€§é€’å¢é˜…è¯»è®¡æ•°å™¨
        current_views = self.redis_client.incr(key)
        
        # Step 4: è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆå¯é€‰ï¼‰ï¼Œä¾‹å¦‚ 30 å¤©åè‡ªåŠ¨æ¸…ç†
        self.redis_client.expire(key, 30 * 24 * 60 * 60)  # 30å¤©ç§’æ•°
        
        # Step 5: è¿”å›å½“å‰é˜…è¯»é‡
        return current_views
    
    def get_view_count(self, article_id):
        """
        è·å–æŒ‡å®šæ–‡ç« çš„å½“å‰é˜…è¯»é‡
        
        Args:
            article_id (str): æ–‡ç« å”¯ä¸€æ ‡è¯†ç¬¦
        
        Returns:
            int: å½“å‰é˜…è¯»é‡ï¼Œè‹¥ä¸å­˜åœ¨åˆ™è¿”å› 0
        """
        # Step 6: æ„å»ºé”®å
        key = f"article:view:{article_id}"
        
        # Step 7: æŸ¥è¯¢å½“å‰å€¼ï¼Œè‹¥ä¸å­˜åœ¨åˆ™è¿”å› 0
        views = self.redis_client.get(key)
        if views is None:
            return 0
        return int(views)
    
    def simulate_user_views(self, article_id, view_count=5):
        """
        æ¨¡æ‹Ÿå¤šä¸ªç”¨æˆ·è®¿é—®åŒä¸€ç¯‡æ–‡ç« ï¼Œæµ‹è¯•å¹¶å‘å®‰å…¨æ€§å’Œè®¡æ•°å‡†ç¡®æ€§
        
        Args:
            article_id (str): æ–‡ç« å”¯ä¸€æ ‡è¯†ç¬¦
            view_count (int): æ¨¡æ‹Ÿè®¿é—®æ¬¡æ•°
        
        Returns:
            list: æ¯æ¬¡è®¿é—®åçš„é˜…è¯»é‡åˆ—è¡¨
        """
        results = []
        # Step 8: å¾ªç¯æ¨¡æ‹Ÿç”¨æˆ·è®¿é—®
        for i in range(view_count):
            # Step 9: æ¯æ¬¡è®¿é—®éƒ½è°ƒç”¨è®¡æ•°å™¨é€’å¢
            new_count = self.increment_view_count(article_id)
            results.append(new_count)
            
            # Step 10: æ¨¡æ‹ŸçœŸå®ç”¨æˆ·è®¿é—®é—´éš”ï¼ˆéå¿…éœ€ï¼Œä»…ç”¨äºæ¼”ç¤ºï¼‰
            time.sleep(0.1)
        
        # Step 11: è¿”å›æ¯æ¬¡é€’å¢åçš„ç»“æœåˆ—è¡¨
        return results

# ç¤ºä¾‹ä½¿ç”¨
def main():
    """
    ä¸»å‡½æ•°ï¼šæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ ArticleViewCounter ç±»è¿›è¡Œæ–‡ç« é˜…è¯»è®¡æ•°
    """
    # Step 12: å®ä¾‹åŒ–è®¡æ•°å™¨
    counter = ArticleViewCounter()
    
    # Step 13: æŒ‡å®šæµ‹è¯•æ–‡ç« ID
    test_article_id = "tech-001"
    
    # Step 14: æ¨¡æ‹Ÿ5æ¬¡ç”¨æˆ·è®¿é—®
    print(f"å¼€å§‹æ¨¡æ‹Ÿå¯¹æ–‡ç«  {test_article_id} çš„è®¿é—®...")
    view_results = counter.simulate_user_views(test_article_id, 5)
    
    # Step 15: è¾“å‡ºæ¯æ¬¡è®¿é—®åçš„é˜…è¯»é‡
    for idx, count in enumerate(view_results, 1):
        print(f"ç¬¬ {idx} æ¬¡è®¿é—®åï¼Œé˜…è¯»é‡: {count}")
    
    # Step 16: æœ€ç»ˆæŸ¥è¯¢ç¡®è®¤é˜…è¯»é‡
    final_count = counter.get_view_count(test_article_id)
    print(f"æœ€ç»ˆç¡®è®¤é˜…è¯»é‡: {final_count}")

if __name__ == "__main__":
    main()
```

#### OUTPUT
```
å¼€å§‹æ¨¡æ‹Ÿå¯¹æ–‡ç«  tech-001 çš„è®¿é—®...
ç¬¬ 1 æ¬¡è®¿é—®åï¼Œé˜…è¯»é‡: 1
ç¬¬ 2 æ¬¡è®¿é—®åï¼Œé˜…è¯»é‡: 2
ç¬¬ 3 æ¬¡è®¿é—®åï¼Œé˜…è¯»é‡: 3
ç¬¬ 4 æ¬¡è®¿é—®åï¼Œé˜…è¯»é‡: 4
ç¬¬ 5 æ¬¡è®¿é—®åï¼Œé˜…è¯»é‡: 5
æœ€ç»ˆç¡®è®¤é˜…è¯»é‡: 5
```

è¯¥ä»£ç ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Redis çš„ INCR å‘½ä»¤å®ç°ä¸€ä¸ªé«˜å¹¶å‘å®‰å…¨çš„æ–‡ç« é˜…è¯»è®¡æ•°å™¨ã€‚INCR æ˜¯åŸå­æ“ä½œï¼Œå³ä½¿åœ¨å¤šçº¿ç¨‹æˆ–å¤šè¿›ç¨‹ç¯å¢ƒä¸‹ä¹Ÿèƒ½ä¿è¯è®¡æ•°å‡†ç¡®æ— è¯¯ï¼Œæ— éœ€é¢å¤–åŠ é”ã€‚ç±»ä¸­å°è£…äº†é€’å¢ã€æŸ¥è¯¢å’Œæ¨¡æ‹Ÿè®¿é—®åŠŸèƒ½ï¼Œå¹¶é€šè¿‡è®¾ç½®è¿‡æœŸæ—¶é—´å®ç°è‡ªåŠ¨æ•°æ®æ¸…ç†ï¼Œé¿å…é•¿æœŸå­˜å‚¨æ— æ•ˆæ•°æ®ã€‚

å…³é”®ç‚¹åœ¨äºåˆ©ç”¨ Redis çš„é«˜æ€§èƒ½å’ŒåŸå­æ€§ç‰¹æ€§ï¼Œç¡®ä¿åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹é˜…è¯»æ•°ä¸ä¼šå‡ºé”™ã€‚åŒæ—¶ï¼Œä»£ç ç»“æ„æ¸…æ™°ï¼Œæ³¨é‡Šå®Œæ•´ï¼Œä¾¿äºç†è§£æ¯ä¸€æ­¥æ“ä½œçš„ç›®çš„ã€‚æ¨¡æ‹Ÿè®¿é—®éƒ¨åˆ†è¿˜åŠ å…¥äº†å»¶æ—¶ä»¥æ›´è´´è¿‘çœŸå®ç”¨æˆ·è¡Œä¸ºï¼Œå¸®åŠ©å¼€å‘è€…ç›´è§‚çœ‹åˆ°è®¡æ•°å™¨çš„å¢é•¿è¿‡ç¨‹ã€‚

```bash
# åˆå§‹åŒ–æ–‡ç« é˜…è¯»é‡
SET article:1001:views 0

# æ¯æ¬¡è®¿é—® +1
INCR article:1001:views

# è·å–å½“å‰é˜…è¯»é‡
GET article:1001:views
```

> âš ï¸ æ³¨æ„ï¼šINCR æ˜¯åŸå­æ“ä½œï¼Œå¤©ç„¶çº¿ç¨‹å®‰å…¨ï¼Œæ— éœ€åŠ é”ï¼Œç‰¹åˆ«é€‚åˆé«˜å¹¶å‘åœºæ™¯ã€‚

æ­¤å¤–ï¼ŒString è¿˜å¸¸ç”¨äºç¼“å­˜åºåˆ—åŒ–åçš„å¯¹è±¡ï¼ˆå¦‚ JSONï¼‰ï¼Œä½†è¦æ³¨æ„æ§åˆ¶ Value å¤§å°ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹ã€‚

---

### Hashï¼šHSET/HGET å­˜å‚¨å¯¹è±¡å±æ€§

å½“ä½ éœ€è¦å­˜å‚¨ä¸€ä¸ªå¯¹è±¡çš„å¤šä¸ªå­—æ®µæ—¶ï¼ŒHash å°±æ˜¯æœ€ä½³é€‰æ‹©ã€‚ç›¸æ¯”å°†æ•´ä¸ªå¯¹è±¡åºåˆ—åŒ–ä¸º Stringï¼ŒHash æ”¯æŒæŒ‰å­—æ®µè¯»å†™ï¼ŒèŠ‚çœå¸¦å®½ï¼Œæé«˜çµæ´»æ€§ã€‚

ä¾‹å¦‚ï¼Œå­˜å‚¨ç”¨æˆ·èµ„æ–™ï¼š

```python
import docker
import time
import sys


def start_redis_container(image_name='redis:latest', container_name='my-redis', port_mapping='6379:6379'):
    """
    å¯åŠ¨ä¸€ä¸ª Redis å®¹å™¨å®ä¾‹ï¼Œæ”¯æŒè‡ªå®šä¹‰é•œåƒã€å®¹å™¨åå’Œç«¯å£æ˜ å°„ã€‚
    
    Args:
        image_name (str): è¦ä½¿ç”¨çš„ Redis é•œåƒåç§°ï¼Œé»˜è®¤ä¸º 'redis:latest'
        container_name (str): å®¹å™¨åç§°ï¼Œé»˜è®¤ä¸º 'my-redis'
        port_mapping (str): ä¸»æœºä¸å®¹å™¨çš„ç«¯å£æ˜ å°„ï¼Œæ ¼å¼ 'host_port:container_port'ï¼Œé»˜è®¤ '6379:6379'
    
    Returns:
        dict: åŒ…å«å®¹å™¨IDã€çŠ¶æ€å’Œè®¿é—®åœ°å€çš„ä¿¡æ¯å­—å…¸
    """
    # Step 1: åˆå§‹åŒ– Docker å®¢æˆ·ç«¯
    client = docker.from_env()
    
    # Step 2: æ£€æŸ¥é•œåƒæ˜¯å¦å­˜åœ¨ï¼Œå¦‚ä¸å­˜åœ¨åˆ™æ‹‰å–
    try:
        client.images.get(image_name)
        print(f"[INFO] é•œåƒ {image_name} å·²å­˜åœ¨ï¼Œè·³è¿‡æ‹‰å–ã€‚")
    except docker.errors.ImageNotFound:
        print(f"[INFO] é•œåƒ {image_name} ä¸å­˜åœ¨ï¼Œæ­£åœ¨æ‹‰å–...")
        client.images.pull(image_name)
        print(f"[INFO] é•œåƒ {image_name} æ‹‰å–å®Œæˆã€‚")
    
    # Step 3: æ£€æŸ¥æ˜¯å¦å·²æœ‰åŒåå®¹å™¨è¿è¡Œï¼Œè‹¥æœ‰åˆ™åœæ­¢å¹¶ç§»é™¤
    try:
        existing_container = client.containers.get(container_name)
        print(f"[WARN] å‘ç°å·²å­˜åœ¨çš„å®¹å™¨ '{container_name}'ï¼Œæ­£åœ¨åœæ­¢å¹¶ç§»é™¤...")
        existing_container.stop()
        existing_container.remove()
        print(f"[INFO] æ—§å®¹å™¨ '{container_name}' å·²æ¸…ç†ã€‚")
    except docker.errors.NotFound:
        print(f"[INFO] æœªå‘ç°åŒåå®¹å™¨ '{container_name}'ï¼Œç»§ç»­åˆ›å»ºæ–°å®¹å™¨ã€‚")
    
    # Step 4: åˆ›å»ºå¹¶å¯åŠ¨ Redis å®¹å™¨
    print(f"[INFO] æ­£åœ¨åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨ '{container_name}'...")
    container = client.containers.run(
        image=image_name,
        name=container_name,
        ports={'6379/tcp': int(port_mapping.split(':')[0])},  # æ˜ å°„ç«¯å£
        detach=True,  # åå°è¿è¡Œ
        restart_policy={"Name": "unless-stopped"}  # è®¾ç½®é‡å¯ç­–ç•¥
    )
    
    # Step 5: ç­‰å¾…å®¹å™¨å¯åŠ¨å¹¶æ£€æŸ¥å¥åº·çŠ¶æ€ï¼ˆæœ€å¤šç­‰å¾…30ç§’ï¼‰
    print("[INFO] ç­‰å¾…å®¹å™¨å¯åŠ¨ä¸­...")
    for _ in range(30):
        container.reload()  # åˆ·æ–°å®¹å™¨çŠ¶æ€
        if container.status == 'running':
            break
        time.sleep(1)
    else:
        raise RuntimeError("å®¹å™¨å¯åŠ¨è¶…æ—¶ï¼Œè¯·æ£€æŸ¥é…ç½®æˆ–æ—¥å¿—ã€‚")
    
    # Step 6: è·å–å®¹å™¨è¯¦ç»†ä¿¡æ¯å¹¶è¿”å›
    container_info = {
        "container_id": container.id[:12],
        "status": container.status,
        "access_url": f"redis://localhost:{port_mapping.split(':')[0]}",
        "container_name": container.name
    }
    
    print(f"[SUCCESS] Redis å®¹å™¨ '{container_name}' å¯åŠ¨æˆåŠŸï¼")
    return container_info


if __name__ == "__main__":
    # Step 7: è°ƒç”¨å‡½æ•°å¹¶å¤„ç†å¼‚å¸¸
    try:
        result = start_redis_container()
        print("
=== å®¹å™¨å¯åŠ¨ç»“æœ ===")
        for key, value in result.items():
            print(f"{key}: {value}")
    except docker.errors.DockerException as e:
        print(f"[ERROR] Docker æ“ä½œå¤±è´¥: {e}", file=sys.stderr)
        sys.exit(1)
    except Exception as e:
        print(f"[ERROR] æœªçŸ¥é”™è¯¯: {e}", file=sys.stderr)
        sys.exit(1)
```

#### OUTPUT
```
[INFO] é•œåƒ redis:latest å·²å­˜åœ¨ï¼Œè·³è¿‡æ‹‰å–ã€‚
[INFO] æœªå‘ç°åŒåå®¹å™¨ 'my-redis'ï¼Œç»§ç»­åˆ›å»ºæ–°å®¹å™¨ã€‚
[INFO] æ­£åœ¨åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨ 'my-redis'...
[INFO] ç­‰å¾…å®¹å™¨å¯åŠ¨ä¸­...
[SUCCESS] Redis å®¹å™¨ 'my-redis' å¯åŠ¨æˆåŠŸï¼

=== å®¹å™¨å¯åŠ¨ç»“æœ ===
container_id: a1b2c3d4e5f6
status: running
access_url: redis://localhost:6379
container_name: my-redis
```

è¯¥ä»£ç ä½¿ç”¨ Docker SDK for Python å®ç°ä¸€é”®å¯åŠ¨ Redis å®¹å™¨ï¼ŒåŒ…å«å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼šå…ˆæ£€æŸ¥å¹¶æ‹‰å–é•œåƒï¼Œå†æ¸…ç†å†²çªå®¹å™¨ï¼Œæœ€ååˆ›å»ºå¹¶ç›‘æ§å¯åŠ¨çŠ¶æ€ã€‚å…³é”®è®¾è®¡åŒ…æ‹¬ç«¯å£æ˜ å°„é…ç½®ã€è‡ªåŠ¨é‡è¯•æœºåˆ¶å’Œç»“æ„åŒ–è¿”å›å€¼ï¼Œä¾¿äºåç»­ç¨‹åºè°ƒç”¨ã€‚æ³¨é‡Šå¯†åº¦é«˜ï¼Œæ¯æ­¥æ“ä½œæ¸…æ™°æ ‡æ³¨ï¼Œé€‚åˆæ•™å­¦å’Œå·¥ç¨‹å¤ç”¨ã€‚

ä»£ç å¥å£®æ€§ä½“ç°åœ¨å¼‚å¸¸å¤„ç†å’ŒçŠ¶æ€è½®è¯¢ä¸Šâ€”â€”è‹¥å®¹å™¨30ç§’å†…æœªè¿›å…¥è¿è¡ŒçŠ¶æ€ä¼šä¸»åŠ¨æŠ¥é”™ï¼Œé¿å…é™é»˜å¤±è´¥ã€‚åŒæ—¶æ”¯æŒè‡ªå®šä¹‰å‚æ•°ï¼Œæ–¹ä¾¿é€‚é…ä¸åŒç¯å¢ƒéœ€æ±‚ã€‚è¾“å‡ºç»“æœç»“æ„åŒ–å±•ç¤ºå®¹å™¨å…³é”®ä¿¡æ¯ï¼Œä¾¿äºç”¨æˆ·å¿«é€Ÿè¿æ¥ Redis æœåŠ¡ã€‚

```bash
HSET user:10086 name "å¼ ä¸‰" age 28 email "zhangsan@example.com"
HGET user:10086 name
HGETALL user:10086
```

ç±»æ¯”æ•°æ®åº“ä¸­çš„â€œè¡Œè®°å½•â€ï¼ŒHash ä¸­çš„æ¯ä¸ª field-value å¯¹åº”ä¸€ä¸ªåˆ—ã€‚è¿™ç§ç»“æ„åœ¨æ›´æ–°éƒ¨åˆ†å­—æ®µæ—¶å°¤å…¶é«˜æ•ˆâ€”â€”ä½ ä¸éœ€è¦é‡å†™æ•´ä¸ªå¯¹è±¡ã€‚

---

### Listï¼šLPUSH/RPOP å®ç°é˜Ÿåˆ—

List æ˜¯åŒå‘é“¾è¡¨ç»“æ„ï¼Œæ”¯æŒä»ä¸¤ç«¯æ’å…¥å’Œå¼¹å‡ºå…ƒç´ ï¼Œå¤©ç„¶é€‚é…é˜Ÿåˆ—ï¼ˆQueueï¼‰å’Œæ ˆï¼ˆStackï¼‰æ¨¡å‹ã€‚ç”µå•†ç³»ç»Ÿçš„è®¢å•å¤„ç†ã€æ¶ˆæ¯ä¸­é—´ä»¶çš„ç¼“å†²åŒºï¼Œéƒ½å¯ä»¥ç”¨ List è½»æ¾å®ç°ã€‚

æ¨¡æ‹Ÿä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼š

```python
import redis

class RedisFIFOQueue:
    """
    ä½¿ç”¨ Redis çš„ LPUSH å’Œ RPOP å‘½ä»¤å®ç°å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰é˜Ÿåˆ—ã€‚
    
    é€šè¿‡åœ¨åˆ—è¡¨å·¦ä¾§æ¨å…¥å…ƒç´ ã€å³ä¾§å¼¹å‡ºå…ƒç´ ï¼Œæ¨¡æ‹Ÿé˜Ÿåˆ—è¡Œä¸ºã€‚
    
    Attributes:
        client (redis.Redis): Redis å®¢æˆ·ç«¯å®ä¾‹
        queue_key (str): é˜Ÿåˆ—åœ¨ Redis ä¸­çš„é”®å
    """
    
    def __init__(self, host='localhost', port=6379, db=0, queue_name='fifo_queue'):
        """
        åˆå§‹åŒ– Redis FIFO é˜Ÿåˆ—å®¢æˆ·ç«¯ã€‚
        
        Args:
            host (str): Redis æœåŠ¡å™¨ä¸»æœºåœ°å€ï¼Œé»˜è®¤ 'localhost'
            port (int): Redis æœåŠ¡å™¨ç«¯å£ï¼Œé»˜è®¤ 6379
            db (int): Redis æ•°æ®åº“ç¼–å·ï¼Œé»˜è®¤ 0
            queue_name (str): é˜Ÿåˆ—é”®åï¼Œé»˜è®¤ 'fifo_queue'
        """
        # Step 1: åˆ›å»º Redis å®¢æˆ·ç«¯è¿æ¥
        self.client = redis.Redis(host=host, port=port, db=db, decode_responses=True)
        
        # Step 2: è®¾ç½®é˜Ÿåˆ—é”®å
        self.queue_key = queue_name
    
    def enqueue(self, item):
        """
        å‘é˜Ÿåˆ—å°¾éƒ¨æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼ˆå®é™…ä½¿ç”¨ LPUSH åœ¨å·¦ä¾§æ¨å…¥ï¼‰ã€‚
        
        Args:
            item (str): è¦å…¥é˜Ÿçš„å­—ç¬¦ä¸²å…ƒç´ 
        
        Returns:
            int: å½“å‰é˜Ÿåˆ—é•¿åº¦
        """
        # Step 1: ä½¿ç”¨ LPUSH å°†å…ƒç´ æ¨å…¥åˆ—è¡¨å·¦ä¾§ï¼ˆé€»è¾‘ä¸Šä¸ºé˜Ÿå°¾ï¼‰
        queue_length = self.client.lpush(self.queue_key, item)
        
        # Step 2: è¿”å›å½“å‰é˜Ÿåˆ—é•¿åº¦
        return queue_length
    
    def dequeue(self):
        """
        ä»é˜Ÿåˆ—å¤´éƒ¨ç§»é™¤å¹¶è¿”å›ä¸€ä¸ªå…ƒç´ ï¼ˆä½¿ç”¨ RPOP ä»å³ä¾§å¼¹å‡ºï¼‰ã€‚
        
        Returns:
            str or None: å¼¹å‡ºçš„å…ƒç´ ï¼Œè‹¥é˜Ÿåˆ—ä¸ºç©ºåˆ™è¿”å› None
        """
        # Step 1: ä½¿ç”¨ RPOP ä»åˆ—è¡¨å³ä¾§å¼¹å‡ºå…ƒç´ ï¼ˆé€»è¾‘ä¸Šä¸ºé˜Ÿé¦–ï¼‰
        item = self.client.rpop(self.queue_key)
        
        # Step 2: è¿”å›å¼¹å‡ºçš„å…ƒç´ ï¼Œå¯èƒ½ä¸º Noneï¼ˆå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼‰
        return item
    
    def size(self):
        """
        è·å–å½“å‰é˜Ÿåˆ—ä¸­å…ƒç´ çš„æ•°é‡ã€‚
        
        Returns:
            int: é˜Ÿåˆ—ä¸­å…ƒç´ ä¸ªæ•°
        """
        # Step 1: ä½¿ç”¨ LLEN è·å–åˆ—è¡¨é•¿åº¦
        length = self.client.llen(self.queue_key)
        
        # Step 2: è¿”å›é˜Ÿåˆ—é•¿åº¦
        return length
    
    def is_empty(self):
        """
        åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºã€‚
        
        Returns:
            bool: True è¡¨ç¤ºé˜Ÿåˆ—ä¸ºç©ºï¼ŒFalse è¡¨ç¤ºéç©º
        """
        # Step 1: æ£€æŸ¥é˜Ÿåˆ—é•¿åº¦æ˜¯å¦ä¸º 0
        return self.size() == 0


# --- ä¸»ç¨‹åºæ¼”ç¤ºéƒ¨åˆ† ---
if __name__ == "__main__":
    # Step 1: å®ä¾‹åŒ– FIFO é˜Ÿåˆ—å¯¹è±¡
    fifo_queue = RedisFIFOQueue(queue_name='demo_queue')
    
    # Step 2: æ¸…ç©ºæµ‹è¯•é˜Ÿåˆ—ï¼ˆé¿å…å†å²æ•°æ®å¹²æ‰°ï¼‰
    fifo_queue.client.delete('demo_queue')
    
    # Step 3: å…¥é˜Ÿä¸‰ä¸ªå…ƒç´ 
    print("[å…¥é˜Ÿæ“ä½œ]")
    for i, item in enumerate(['ä»»åŠ¡A', 'ä»»åŠ¡B', 'ä»»åŠ¡C'], start=1):
        length = fifo_queue.enqueue(item)
        print(f"  å…¥é˜Ÿ '{item}'ï¼Œå½“å‰é˜Ÿåˆ—é•¿åº¦: {length}")
    
    # Step 4: æŸ¥çœ‹å½“å‰é˜Ÿåˆ—å¤§å°
    print(f"
[å½“å‰é˜Ÿåˆ—çŠ¶æ€] æ€»å…ƒç´ æ•°: {fifo_queue.size()}")
    
    # Step 5: ä¾æ¬¡å‡ºé˜Ÿæ‰€æœ‰å…ƒç´ 
    print("
[å‡ºé˜Ÿæ“ä½œ]")
    while not fifo_queue.is_empty():
        item = fifo_queue.dequeue()
        print(f"  å‡ºé˜Ÿ: '{item}'ï¼Œå‰©ä½™å…ƒç´ æ•°: {fifo_queue.size()}")
    
    # Step 6: å°è¯•ä»ç©ºé˜Ÿåˆ—å‡ºé˜Ÿ
    print(f"
[ç©ºé˜Ÿåˆ—å‡ºé˜Ÿ] ç»“æœ: {fifo_queue.dequeue()}")
```

#### OUTPUT
```
[å…¥é˜Ÿæ“ä½œ]
  å…¥é˜Ÿ 'ä»»åŠ¡A'ï¼Œå½“å‰é˜Ÿåˆ—é•¿åº¦: 1
  å…¥é˜Ÿ 'ä»»åŠ¡B'ï¼Œå½“å‰é˜Ÿåˆ—é•¿åº¦: 2
  å…¥é˜Ÿ 'ä»»åŠ¡C'ï¼Œå½“å‰é˜Ÿåˆ—é•¿åº¦: 3

[å½“å‰é˜Ÿåˆ—çŠ¶æ€] æ€»å…ƒç´ æ•°: 3

[å‡ºé˜Ÿæ“ä½œ]
  å‡ºé˜Ÿ: 'ä»»åŠ¡A'ï¼Œå‰©ä½™å…ƒç´ æ•°: 2
  å‡ºé˜Ÿ: 'ä»»åŠ¡B'ï¼Œå‰©ä½™å…ƒç´ æ•°: 1
  å‡ºé˜Ÿ: 'ä»»åŠ¡C'ï¼Œå‰©ä½™å…ƒç´ æ•°: 0

[ç©ºé˜Ÿåˆ—å‡ºé˜Ÿ] ç»“æœ: None
```

æœ¬ä»£ç é€šè¿‡ Redis çš„ LPUSHï¼ˆå·¦æ¨ï¼‰å’Œ RPOPï¼ˆå³å¼¹ï¼‰å‘½ä»¤ç»„åˆï¼Œå®ç°äº†å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰é˜Ÿåˆ—ã€‚è™½ç„¶ LPUSH æ˜¯å‘åˆ—è¡¨å·¦ä¾§æ’å…¥ï¼Œä½†åœ¨é€»è¾‘ä¸Šæˆ‘ä»¬å°†å®ƒè§†ä¸ºâ€œé˜Ÿå°¾â€ï¼Œè€Œ RPOP ä»å³ä¾§å¼¹å‡ºï¼Œè§†ä¸ºâ€œé˜Ÿé¦–â€ï¼Œä»è€Œä¿è¯äº†å…ˆè¿›å…¥çš„å…ƒç´ å…ˆè¢«å–å‡ºã€‚ç±»å°è£…äº† enqueueã€dequeueã€size å’Œ is_empty æ–¹æ³•ï¼Œæä¾›æ¸…æ™°çš„é˜Ÿåˆ—æ“ä½œæ¥å£ã€‚ä¸»ç¨‹åºæ¼”ç¤ºäº†å®Œæ•´å…¥é˜Ÿã€å‡ºé˜Ÿæµç¨‹ï¼Œå¹¶éªŒè¯äº†ç©ºé˜Ÿåˆ—æ—¶çš„å®‰å…¨å¤„ç†ï¼ˆè¿”å› Noneï¼‰ã€‚è¿™ç§å®ç°æ–¹å¼é«˜æ•ˆä¸”çº¿ç¨‹å®‰å…¨ï¼Œé€‚ç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ä»»åŠ¡è°ƒåº¦æˆ–æ¶ˆæ¯ç¼“å†²åœºæ™¯ã€‚

```bash
# ç”Ÿäº§è€…ï¼šå‹å…¥ä»»åŠ¡
LPUSH task_queue "send_email_001"
LPUSH task_queue "generate_report_002"

# æ¶ˆè´¹è€…ï¼šå–å‡ºä»»åŠ¡æ‰§è¡Œ
RPOP task_queue
```

> âš ï¸ æ³¨æ„ï¼šè‹¥éœ€é˜»å¡å¼æ¶ˆè´¹ï¼ˆæ— ä»»åŠ¡æ—¶ç­‰å¾…ï¼‰ï¼Œå¯ä½¿ç”¨ BRPOP æ›¿ä»£ RPOPï¼Œé¿å…è½®è¯¢ç©ºè½¬æµªè´¹ CPUã€‚

---

### Setï¼šSADD/SMEMBERS å¤„ç†å”¯ä¸€æ ‡ç­¾

Set æ˜¯æ— åºä¸”å…ƒç´ å”¯ä¸€çš„é›†åˆï¼Œé€‚ç”¨äºå»é‡ã€æ ‡ç­¾ç®¡ç†ã€å¥½å‹å…³ç³»ç­‰åœºæ™¯ã€‚æ¯”å¦‚ï¼Œä¸€ç¯‡æ–‡ç« è¢«æ‰“ä¸Šå¤šä¸ªæ ‡ç­¾ï¼Œè€Œæ¯ä¸ªæ ‡ç­¾åªåº”å‡ºç°ä¸€æ¬¡ï¼š

```python
import redis

def connect_to_redis():
    """
    è¿æ¥åˆ°æœ¬åœ° Redis æœåŠ¡å™¨ï¼Œè¿”å› Redis å®¢æˆ·ç«¯å®ä¾‹ã€‚
    
    Returns:
        redis.Redis: Redis å®¢æˆ·ç«¯å¯¹è±¡ï¼Œç”¨äºåç»­æ“ä½œã€‚
    """
    # Step 1: åˆ›å»º Redis å®¢æˆ·ç«¯è¿æ¥ï¼Œé»˜è®¤ host='localhost', port=6379
    client = redis.Redis(host='localhost', port=6379, db=0, decode_responses=True)
    
    # Step 2: æµ‹è¯•è¿æ¥æ˜¯å¦æˆåŠŸï¼ˆping è¿”å› 'PONG' è¡¨ç¤ºæˆåŠŸï¼‰
    try:
        client.ping()
        print("[INFO] Redis è¿æ¥æˆåŠŸï¼")
    except redis.ConnectionError:
        print("[ERROR] æ— æ³•è¿æ¥åˆ° Redis æœåŠ¡å™¨ã€‚è¯·ç¡®ä¿æœåŠ¡å·²å¯åŠ¨ã€‚")
        return None
    
    # Step 3: è¿”å›å®¢æˆ·ç«¯å®ä¾‹ä¾›å…¶ä»–å‡½æ•°ä½¿ç”¨
    return client


def add_tags_to_article(client, article_id, tags):
    """
    ä½¿ç”¨ SADD å‘½ä»¤ä¸ºæŒ‡å®šæ–‡ç« æ·»åŠ å¤šä¸ªæ ‡ç­¾ï¼Œæ ‡ç­¾å­˜å‚¨åœ¨ä»¥ article:{id}:tags ä¸ºé”®çš„é›†åˆä¸­ã€‚
    
    Args:
        client (redis.Redis): Redis å®¢æˆ·ç«¯å®ä¾‹ã€‚
        article_id (str): æ–‡ç« å”¯ä¸€æ ‡è¯†ç¬¦ã€‚
        tags (list): æ ‡ç­¾å­—ç¬¦ä¸²åˆ—è¡¨ã€‚
    
    Returns:
        int: æˆåŠŸæ·»åŠ çš„æ–°æ ‡ç­¾æ•°é‡ï¼ˆé‡å¤æ ‡ç­¾ä¸è®¡ï¼‰ã€‚
    """
    # Step 1: æ„é€  Redis é›†åˆé”®åï¼Œæ ¼å¼ä¸º "article:{article_id}:tags"
    key = f"article:{article_id}:tags"
    
    # Step 2: ä½¿ç”¨ SADD å‘½ä»¤æ·»åŠ æ‰€æœ‰æ ‡ç­¾ï¼ŒRedis è‡ªåŠ¨å»é‡
    added_count = client.sadd(key, *tags)
    
    # Step 3: æ‰“å°æ“ä½œæ—¥å¿—
    print(f"[ACTION] ä¸ºæ–‡ç«  '{article_id}' æ·»åŠ äº† {added_count} ä¸ªæ–°æ ‡ç­¾ï¼š{tags}")
    
    # Step 4: è¿”å›å®é™…æ–°å¢çš„æ ‡ç­¾æ•°é‡
    return added_count


def get_article_tags(client, article_id):
    """
    è·å–æŒ‡å®šæ–‡ç« çš„æ‰€æœ‰æ ‡ç­¾ã€‚
    
    Args:
        client (redis.Redis): Redis å®¢æˆ·ç«¯å®ä¾‹ã€‚
        article_id (str): æ–‡ç« å”¯ä¸€æ ‡è¯†ç¬¦ã€‚
    
    Returns:
        set: åŒ…å«æ‰€æœ‰æ ‡ç­¾çš„é›†åˆï¼ˆæ— åºã€æ— é‡å¤ï¼‰ã€‚
    """
    # Step 1: æ„é€ é”®å
    key = f"article:{article_id}:tags"
    
    # Step 2: ä½¿ç”¨ SMEMBERS è·å–é›†åˆå†…æ‰€æœ‰æˆå‘˜
    tags = client.smembers(key)
    
    # Step 3: æ‰“å°å½“å‰æ ‡ç­¾é›†
    print(f"[INFO] æ–‡ç«  '{article_id}' çš„å½“å‰æ ‡ç­¾ï¼š{tags}")
    
    # Step 4: è¿”å›æ ‡ç­¾é›†åˆ
    return tags


def main():
    """
    ä¸»å‡½æ•°ï¼šæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ Redis é›†åˆç®¡ç†æ–‡ç« æ ‡ç­¾ã€‚
    åŒ…æ‹¬è¿æ¥ Redisã€æ·»åŠ æ ‡ç­¾ã€æŸ¥è¯¢æ ‡ç­¾ç­‰å®Œæ•´æµç¨‹ã€‚
    """
    # Step 1: å»ºç«‹ Redis è¿æ¥
    client = connect_to_redis()
    if not client:
        return  # è¿æ¥å¤±è´¥åˆ™é€€å‡º
    
    # Step 2: å®šä¹‰æµ‹è¯•æ–‡ç«  ID å’Œåˆå§‹æ ‡ç­¾
    article_id = "post_1001"
    initial_tags = ["Python", "Redis", "Database", "Tutorial"]
    
    # Step 3: ä¸ºæ–‡ç« æ·»åŠ åˆå§‹æ ‡ç­¾
    add_tags_to_article(client, article_id, initial_tags)
    
    # Step 4: æŸ¥è¯¢å¹¶æ‰“å°å½“å‰æ ‡ç­¾
    current_tags = get_article_tags(client, article_id)
    
    # Step 5: å°è¯•æ·»åŠ åŒ…å«é‡å¤é¡¹çš„æ–°æ ‡ç­¾
    new_tags = ["Redis", "Cache", "Performance", "Python"]  # åŒ…å«é‡å¤æ ‡ç­¾
    add_tags_to_article(client, article_id, new_tags)
    
    # Step 6: å†æ¬¡æŸ¥è¯¢æ›´æ–°åçš„æ ‡ç­¾
    updated_tags = get_article_tags(client, article_id)
    
    # Step 7: è¾“å‡ºæœ€ç»ˆç»Ÿè®¡ä¿¡æ¯
    print(f"[SUMMARY] æœ€ç»ˆæ ‡ç­¾æ€»æ•°ï¼š{len(updated_tags)} ä¸ª")


# å¯åŠ¨ä¸»ç¨‹åº
if __name__ == "__main__":
    main()
```

#### OUTPUT
```
[INFO] Redis è¿æ¥æˆåŠŸï¼
[ACTION] ä¸ºæ–‡ç«  'post_1001' æ·»åŠ äº† 4 ä¸ªæ–°æ ‡ç­¾ï¼š['Python', 'Redis', 'Database', 'Tutorial']
[INFO] æ–‡ç«  'post_1001' çš„å½“å‰æ ‡ç­¾ï¼š{'Python', 'Redis', 'Database', 'Tutorial'}
[ACTION] ä¸ºæ–‡ç«  'post_1001' æ·»åŠ äº† 2 ä¸ªæ–°æ ‡ç­¾ï¼š['Redis', 'Cache', 'Performance', 'Python']
[INFO] æ–‡ç«  'post_1001' çš„å½“å‰æ ‡ç­¾ï¼š{'Python', 'Redis', 'Database', 'Tutorial', 'Cache', 'Performance'}
[SUMMARY] æœ€ç»ˆæ ‡ç­¾æ€»æ•°ï¼š6 ä¸ª
```

æœ¬ä»£ç æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Redis çš„ SADD å‘½ä»¤é«˜æ•ˆç®¡ç†æ–‡ç« æ ‡ç­¾ç³»ç»Ÿã€‚é€šè¿‡å°†æ¯ä¸ªæ–‡ç« çš„æ ‡ç­¾å­˜å‚¨ä¸ºç‹¬ç«‹çš„ Set é›†åˆï¼ˆé”®åä¸º article:{id}:tagsï¼‰ï¼Œåˆ©ç”¨ Redis é›†åˆå¤©ç„¶çš„å»é‡ç‰¹æ€§ï¼Œé¿å…äº†é‡å¤æ ‡ç­¾æ’å…¥ã€‚ä»£ç ç»“æ„æ¸…æ™°ï¼Œåˆ†ä¸ºè¿æ¥ç®¡ç†ã€æ ‡ç­¾æ·»åŠ ã€æ ‡ç­¾æŸ¥è¯¢ä¸‰ä¸ªæ ¸å¿ƒå‡½æ•°ï¼Œå¹¶åœ¨ä¸»å‡½æ•°ä¸­æ¨¡æ‹Ÿäº†çœŸå®åœºæ™¯ï¼šå…ˆæ·»åŠ åˆå§‹æ ‡ç­¾ï¼Œå†å°è¯•æ·»åŠ å«é‡å¤é¡¹çš„æ–°æ ‡ç­¾ï¼ŒéªŒè¯ SADD çš„å¹‚ç­‰æ€§ã€‚

å…³é”®ç‚¹åŒ…æ‹¬ï¼šä½¿ç”¨ *tags è§£åŒ…åˆ—è¡¨ä¼ å…¥ SADDï¼›decode_responses=True ç¡®ä¿è¿”å›å­—ç¬¦ä¸²è€Œéå­—èŠ‚ï¼›SMEMBERS è·å–å®Œæ•´æ ‡ç­¾é›†ï¼›é€šè¿‡è¿”å›å€¼åˆ¤æ–­å®é™…æ–°å¢æ•°é‡ã€‚è¿™ç§è®¾è®¡é€‚ç”¨äºåšå®¢ã€CMS ç­‰éœ€è¦åŠ¨æ€ç®¡ç†å¤šå¯¹å¤šå…³ç³»çš„ç³»ç»Ÿï¼Œå…·æœ‰é«˜æ€§èƒ½å’Œæ˜“æ‰©å±•çš„ç‰¹ç‚¹ã€‚

```bash
SADD article:1001:tags "æŠ€æœ¯" "Redis" "å®æˆ˜" "æ€§èƒ½ä¼˜åŒ–"
SMEMBERS article:1001:tags
SISMEMBER article:1001:tags "Redis"  # åˆ¤æ–­æ˜¯å¦å­˜åœ¨
```

Set è¿˜æ”¯æŒäº¤é›†ï¼ˆSINTERï¼‰ã€å¹¶é›†ï¼ˆSUNIONï¼‰ç­‰é«˜çº§è¿ç®—ï¼Œå¯ç”¨äºâ€œå…±åŒå¥½å‹â€ã€â€œæ¨èæ ‡ç­¾â€ç­‰å¤æ‚ä¸šåŠ¡é€»è¾‘ã€‚

---

### Sorted Setï¼šZADD/ZRANGE å®ç°æ’è¡Œæ¦œ

å¦‚æœè¯´ Set æ˜¯â€œæ— åºé›†åˆâ€ï¼Œé‚£ Sorted Set å°±æ˜¯â€œæœ‰åºæ¦œå•â€ã€‚æ¯ä¸ªæˆå‘˜å…³è”ä¸€ä¸ªåˆ†æ•°ï¼ˆscoreï¼‰ï¼ŒRedis è‡ªåŠ¨æŒ‰åˆ†æ•°æ’åºï¼Œå®Œç¾æ”¯æ’‘å®æ—¶æ’è¡Œæ¦œã€ä¼˜å…ˆçº§é˜Ÿåˆ—ç­‰éœ€æ±‚ã€‚

ä¾‹å¦‚ï¼Œæ¸¸æˆç§¯åˆ†æ¦œï¼š

```python
import redis

def setup_leaderboard(client):
    """
    åˆå§‹åŒ–ç©å®¶ç§¯åˆ†æ’è¡Œæ¦œï¼Œä½¿ç”¨ ZADD æ·»åŠ å¤šä¸ªç©å®¶åˆ†æ•°
    
    Args:
        client: Redis å®¢æˆ·ç«¯å®ä¾‹
    
    Returns:
        None
    """
    # Step 1: æ¸…ç©ºæ—§æ•°æ®ï¼ˆé¿å…é‡å¤æµ‹è¯•æ—¶å¹²æ‰°ï¼‰
    client.delete('player_scores')
    
    # Step 2: ä½¿ç”¨ ZADD æ·»åŠ å¤šä¸ªç©å®¶åŠå…¶ç§¯åˆ†ï¼ˆæ ¼å¼ï¼šscore, memberï¼‰
    client.zadd('player_scores', {'Alice': 1500, 'Bob': 2300, 'Charlie': 800, 'Diana': 3100})
    
    # Step 3: æ‰“å°æ·»åŠ æˆåŠŸçš„æç¤ºä¿¡æ¯
    print("[INFO] ç©å®¶ç§¯åˆ†å·²æˆåŠŸå½•å…¥æ’è¡Œæ¦œ")

def get_top_players(client, top_n=3):
    """
    è·å–ç§¯åˆ†æ’è¡Œæ¦œå‰ N åç©å®¶
    
    Args:
        client: Redis å®¢æˆ·ç«¯å®ä¾‹
        top_n: è¦è·å–çš„æ’åæ•°é‡ï¼Œé»˜è®¤ä¸º 3
    
    Returns:
        list: åŒ…å« (ç©å®¶å, ç§¯åˆ†) å…ƒç»„çš„åˆ—è¡¨ï¼ŒæŒ‰ç§¯åˆ†ä»é«˜åˆ°ä½æ’åº
    """
    # Step 1: ä½¿ç”¨ ZRANGE è·å–ç§¯åˆ†æœ€é«˜çš„å‰ N åç©å®¶ï¼ˆé€†åºï¼šä»é«˜åˆ°ä½ï¼‰
    # æ³¨æ„ï¼šZRANGE é»˜è®¤å‡åºï¼Œéœ€è®¾ç½® `desc=True` è·å–é™åº
    top_players = client.zrange('player_scores', 0, top_n - 1, withscores=True, desc=True)
    
    # Step 2: å°†å­—èŠ‚ç»“æœè½¬æ¢ä¸ºå­—ç¬¦ä¸²å’Œæ•´æ•°ï¼ˆRedis è¿”å› bytes ç±»å‹ï¼‰
    formatted_players = [(name.decode('utf-8'), int(score)) for name, score in top_players]
    
    # Step 3: è¿”å›æ ¼å¼åŒ–åçš„æ’è¡Œæ¦œæ•°æ®
    return formatted_players

def display_leaderboard(client):
    """
    æ˜¾ç¤ºå®Œæ•´æ’è¡Œæ¦œï¼ˆæ‰€æœ‰ç©å®¶æŒ‰ç§¯åˆ†ä»é«˜åˆ°ä½ï¼‰
    
    Args:
        client: Redis å®¢æˆ·ç«¯å®ä¾‹
    
    Returns:
        None
    """
    # Step 1: è·å–æ€»ç©å®¶æ•°é‡ä»¥ç¡®å®š ZRANGE èŒƒå›´
    total_players = client.zcard('player_scores')
    
    # Step 2: è·å–å…¨éƒ¨ç©å®¶æŒ‰ç§¯åˆ†é™åºæ’åˆ—
    all_players = client.zrange('player_scores', 0, total_players - 1, withscores=True, desc=True)
    
    # Step 3: æ ¼å¼åŒ–å¹¶æ‰“å°æ’è¡Œæ¦œ
    print("
ğŸ† ç©å®¶ç§¯åˆ†æ’è¡Œæ¦œ ğŸ†")
    print("{:<10} {:<10}".format('æ’å', 'ç©å®¶ [ç§¯åˆ†]'))
    for rank, (name, score) in enumerate(all_players, start=1):
        # è§£ç å­—èŠ‚å¹¶æ ¼å¼åŒ–è¾“å‡º
        player_name = name.decode('utf-8')
        player_score = int(score)
        print("{:<10} {:<10}".format(f"#{rank}", f"{player_name} [{player_score}]") )

# ä¸»ç¨‹åºå…¥å£
if __name__ == '__main__':
    # Step 1: åˆ›å»º Redis å®¢æˆ·ç«¯è¿æ¥ï¼ˆé»˜è®¤æœ¬åœ° 6379 ç«¯å£ï¼‰
    r = redis.Redis(host='localhost', port=6379, db=0, decode_responses=False)
    
    # Step 2: åˆå§‹åŒ–æ’è¡Œæ¦œæ•°æ®
    setup_leaderboard(r)
    
    # Step 3: è·å–å¹¶æ‰“å°å‰ä¸‰åç©å®¶
    top_3 = get_top_players(r, 3)
    print("
ğŸŒŸ å‰ä¸‰åç©å®¶ï¼š")
    for i, (name, score) in enumerate(top_3, 1):
        print(f"  {i}. {name} â€” {score} åˆ†")
    
    # Step 4: æ˜¾ç¤ºå®Œæ•´æ’è¡Œæ¦œ
    display_leaderboard(r)
```

#### OUTPUT
```
[INFO] ç©å®¶ç§¯åˆ†å·²æˆåŠŸå½•å…¥æ’è¡Œæ¦œ

ğŸŒŸ å‰ä¸‰åç©å®¶ï¼š
  1. Diana â€” 3100 åˆ†
  2. Bob â€” 2300 åˆ†
  3. Alice â€” 1500 åˆ†

ğŸ† ç©å®¶ç§¯åˆ†æ’è¡Œæ¦œ ğŸ†
æ’å       ç©å®¶ [ç§¯åˆ†] 
#1         Diana [3100]
#2         Bob [2300]
#3         Alice [1500]
#4         Charlie [800]
```

æœ¬ä»£ç ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Redis çš„æœ‰åºé›†åˆï¼ˆSorted Setï¼‰å®ç°ä¸€ä¸ªç©å®¶ç§¯åˆ†æ’è¡Œæ¦œã€‚é€šè¿‡ ZADD å‘½ä»¤æ‰¹é‡æ’å…¥ç©å®¶åŠå…¶ç§¯åˆ†ï¼Œåˆ©ç”¨ ZRANGE å‘½ä»¤ç»“åˆ `desc=True` å‚æ•°å®ç°ä»é«˜åˆ°ä½çš„æ’åæŸ¥è¯¢ã€‚ä»£ç åŒ…å«ä¸‰ä¸ªæ ¸å¿ƒå‡½æ•°ï¼šåˆå§‹åŒ–æ•°æ®ã€è·å–TopNç©å®¶ã€æ˜¾ç¤ºå®Œæ•´æ¦œå•ã€‚å…³é”®ç‚¹åœ¨äºå¤„ç† Redis è¿”å›çš„å­—èŠ‚ç±»å‹æ•°æ®ï¼ˆéœ€ decodeï¼‰ï¼Œä»¥åŠæ­£ç¡®è®¾ç½® ZRANGE çš„èµ·æ­¢ç´¢å¼•å’Œæ’åºæ–¹å‘ã€‚

åœ¨å®æˆ˜ä¸­ï¼Œè¿™ç§ç»“æ„å¸¸ç”¨äºæ¸¸æˆã€ç”µå•†æˆ–ç¤¾äº¤å¹³å°çš„å®æ—¶æ’è¡Œæ¦œç³»ç»Ÿã€‚ç”±äºæœ‰åºé›†åˆå†…éƒ¨ä½¿ç”¨è·³è·ƒè¡¨å®ç°ï¼Œæ’å…¥å’ŒæŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦å‡ä¸º O(log N)ï¼Œéå¸¸é€‚åˆé«˜é¢‘æ›´æ–°ä¸æŸ¥è¯¢åœºæ™¯ã€‚ç¤ºä¾‹è¿˜å±•ç¤ºäº†æ ¼å¼åŒ–è¾“å‡ºå’Œé”™è¯¯é¢„é˜²ï¼ˆå¦‚æ¸…ç©ºæ—§æ•°æ®ï¼‰ï¼Œä½“ç°äº†å·¥ç¨‹å®è·µä¸­çš„å¥å£®æ€§è®¾è®¡ã€‚

```bash
ZADD leaderboard 1500 "player_A"
ZADD leaderboard 2300 "player_B"
ZADD leaderboard 1800 "player_C"

# è·å–å‰3åï¼ˆæŒ‰åˆ†æ•°ä»é«˜åˆ°ä½ï¼‰
ZREVRANGE leaderboard 0 2 WITHSCORES
```

æ”¯æŒæŒ‰åˆ†æ•°èŒƒå›´æŸ¥è¯¢ï¼ˆZRANGEBYSCOREï¼‰ã€åŠ¨æ€æ›´æ–°æ’åï¼ˆZINCRBYï¼‰ï¼Œè®©æ’è¡Œæ¦œå®æ—¶åˆ·æ–°ä¸å†æ˜¯éš¾é¢˜ã€‚

---

```mermaid
```mermaid
flowchart LR
    subgraph å‰ç«¯å±‚
        F[æµè§ˆå™¨/å®¢æˆ·ç«¯]
    end
    subgraph åº”ç”¨å±‚
        A[åº”ç”¨æœåŠ¡å™¨]
    end
    subgraph ç¼“å­˜å±‚
        R[Redis ç¼“å­˜]
    end
    subgraph æ•°æ®å±‚
        D[æ•°æ®åº“]
    end
    F --> A
    A --> R
    R --> D
    A -.-> D
```
```

*Redis åœ¨å…¸å‹ Web æ¶æ„ä¸­çš„ä½ç½®ï¼šå‰ç«¯è¯·æ±‚ç»åº”ç”¨æœåŠ¡å™¨ï¼Œä¼˜å…ˆè®¿é—® Redis ç¼“å­˜ï¼Œç¼“å­˜æœªå‘½ä¸­æ—¶æŸ¥è¯¢æ•°æ®åº“*

> æ•°æ®ç»“æ„ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œè€Œæ˜¯è¶Šâ€œåˆé€‚â€è¶Šå¥½ã€‚String ç”¨äºç®€å•å€¼ï¼ŒHash ç”¨äºå¯¹è±¡ï¼ŒList ç”¨äºé˜Ÿåˆ—ï¼ŒSet ç”¨äºå»é‡é›†åˆï¼ŒSorted Set ç”¨äºæ’åºæ¦œå•â€”â€”é€‰å‹å‡†ç¡®ï¼Œäº‹åŠåŠŸå€ã€‚

åœ¨ä¸‹ä¸€ç« ã€Šæ€§èƒ½éªŒè¯ï¼šå‹åŠ›æµ‹è¯•ä¸ç»“æœåˆ†æã€‹ä¸­ï¼Œæˆ‘ä»¬å°†å¯¹ä¸Šè¿°æ“ä½œè¿›è¡ŒåŸºå‡†å‹æµ‹ï¼Œç”¨çœŸå®æ•°æ®å‘Šè¯‰ä½ ï¼šä¸åŒç»“æ„åœ¨ä¸åŒè´Ÿè½½ä¸‹çš„è¡¨ç°å·®å¼‚ç©¶ç«Ÿæœ‰å¤šå¤§ã€‚åˆ«æ€¥ï¼ŒçœŸæ­£çš„æ€§èƒ½è°ƒä¼˜ï¼Œæ‰åˆšåˆšå¼€å§‹ã€‚

---

## æ€§èƒ½éªŒè¯ï¼šå‹åŠ›æµ‹è¯•ä¸ç»“æœåˆ†æ

ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ï¼šæ˜æ˜ä»£ç é€»è¾‘æ— è¯¯ï¼Œæ•°æ®åº“ç´¢å¼•ä¹Ÿä¼˜åŒ–åˆ°ä½ï¼Œä½†ç”¨æˆ·åé¦ˆâ€œé¡µé¢å¡é¡¿â€ã€â€œæäº¤æŒ‰é’®ç‚¹ä¸åŠ¨â€ï¼Œç”šè‡³ç³»ç»Ÿåœ¨é«˜å³°æœŸç›´æ¥é›ªå´©ï¼Ÿæƒ³è±¡ä¸€ä¸‹ï¼Œçº¿ä¸Šçªç„¶æ¶Œå…¥åä¸‡å¹¶å‘è¯·æ±‚â€”â€”ä½ çš„æœåŠ¡æ˜¯ç¨³å¦‚æ³°å±±ï¼Œè¿˜æ˜¯ç¬é—´ç˜«ç—ªï¼Ÿ90%çš„æ€§èƒ½é—®é¢˜éƒ½å‡ºåœ¨â€œçœ‹ä¸è§â€çš„åœ°æ–¹ï¼šç¼“å­˜ç¼ºå¤±ã€IO ç“¶é¢ˆã€åºåˆ—åŒ–å¼€é”€ã€‚è€Œ Redisï¼Œæ­£æ˜¯é‚£ä¸ªè®©ä½ ä»â€œå‹‰å¼ºæ‰›ä½â€è·ƒå‡åˆ°â€œæ¸¸åˆƒæœ‰ä½™â€çš„å…³é”®æ­¦å™¨ã€‚

ä¸Šä¸€ç« æˆ‘ä»¬æ·±å…¥å®æˆ˜äº† Redis äº”å¤§æ•°æ®ç»“æ„çš„æ“ä½œç»†èŠ‚ï¼ŒæŒæ¡äº†å¦‚ä½•ç”¨ String å­˜ Tokenã€ç”¨ Hash å­˜ç”¨æˆ·èµ„æ–™ã€ç”¨ Sorted Set å®ç°æ’è¡Œæ¦œã€‚ä½†â€œä¼šç”¨â€ä¸ç­‰äºâ€œé«˜æ•ˆâ€ã€‚æœ¬ç« æˆ‘ä»¬å°†ç”¨çœŸå®å‹æµ‹æ•°æ®è¯´è¯ï¼Œé€šè¿‡ redis-benchmark å·¥å…·æ¨¡æ‹Ÿé«˜å¹¶å‘åœºæ™¯ï¼Œè§£è¯» QPSã€å»¶è¿Ÿã€ååé‡ä¸‰å¤§é»„é‡‘æŒ‡æ ‡ï¼Œå¹¶å¯¹æ¯”æ¥å…¥ Redis å‰åçš„å“åº”æ—¶é—´å·®å¼‚â€”â€”è®©æ€§èƒ½æå‡â€œè‚‰çœ¼å¯è§â€ã€‚

---

### ä¸€ã€å‹æµ‹å·¥å…·å®æˆ˜ï¼šredis-benchmark ä¸Šæ‰‹æŒ‡å—

Redis è‡ªå¸¦çš„ `redis-benchmark` æ˜¯ä¸€ä¸ªè½»é‡çº§ä½†åŠŸèƒ½å¼ºå¤§çš„å‹æµ‹åˆ©å™¨ã€‚å®ƒèƒ½æ¨¡æ‹Ÿå¤šå®¢æˆ·ç«¯å¹¶å‘æ‰§è¡ŒæŒ‡å®šå‘½ä»¤ï¼Œå¿«é€Ÿè¯„ä¼° Redis å®ä¾‹çš„æé™å¤„ç†èƒ½åŠ›ã€‚æ— éœ€å¤æ‚é…ç½®ï¼Œä¸€æ¡å‘½ä»¤å³å¯å¯åŠ¨å‹æµ‹ã€‚

```python
```python
def generate_test_data(size_in_mb):
    """
    ç”ŸæˆæŒ‡å®šå¤§å°çš„æµ‹è¯•æ•°æ®ç”¨äºå‹æµ‹
    
    Args:
        size_in_mb (int): æ•°æ®å¤§å°ï¼Œå•ä½ä¸ºMB
    
    Returns:
        bytes: ç”Ÿæˆçš„å­—èŠ‚æ•°æ®å—
    """
    # Step 1: è®¡ç®—æ€»å­—èŠ‚æ•°ï¼ˆ1MB = 1024 * 1024 å­—èŠ‚ï¼‰
    total_bytes = size_in_mb * 1024 * 1024
    
    # Step 2: ç”Ÿæˆé‡å¤å¡«å……çš„æµ‹è¯•æ•°æ®ï¼ˆä½¿ç”¨å­—æ¯ 'A' å¡«å……ï¼‰
    test_data = b'A' * total_bytes
    
    # Step 3: è¿”å›ç”Ÿæˆçš„æ•°æ®å—
    return test_data


def write_file_stress_test(filename, data, iterations=5):
    """
    æ‰§è¡Œå†™å…¥å‹åŠ›æµ‹è¯•ï¼šå¤šæ¬¡å†™å…¥å¤§æ–‡ä»¶å¹¶è®°å½•è€—æ—¶
    
    Args:
        filename (str): ç›®æ ‡æ–‡ä»¶è·¯å¾„
        data (bytes): è¦å†™å…¥çš„æ•°æ®
        iterations (int): å†™å…¥å¾ªç¯æ¬¡æ•°ï¼Œé»˜è®¤5æ¬¡
    
    Returns:
        list: æ¯æ¬¡å†™å…¥è€—æ—¶çš„åˆ—è¡¨ï¼ˆå•ä½ï¼šç§’ï¼‰
    """
    import time
    
    # Step 1: åˆå§‹åŒ–è€—æ—¶è®°å½•åˆ—è¡¨
    write_times = []
    
    # Step 2: å¾ªç¯æ‰§è¡Œå†™å…¥æ“ä½œ
    for i in range(iterations):
        # Step 2.1: è®°å½•å¼€å§‹æ—¶é—´
        start_time = time.time()
        
        # Step 2.2: ä»¥äºŒè¿›åˆ¶å†™å…¥æ¨¡å¼æ‰“å¼€æ–‡ä»¶å¹¶å†™å…¥æ•°æ®
        with open(filename, 'wb') as f:
            f.write(data)
        
        # Step 2.3: è®°å½•ç»“æŸæ—¶é—´å¹¶è®¡ç®—è€—æ—¶
        end_time = time.time()
        elapsed = end_time - start_time
        
        # Step 2.4: å°†æœ¬æ¬¡è€—æ—¶åŠ å…¥è®°å½•åˆ—è¡¨
        write_times.append(elapsed)
        
        # Step 2.5: æ‰“å°å½“å‰è½®æ¬¡ä¿¡æ¯ï¼ˆä¾¿äºè§‚å¯Ÿè¿›åº¦ï¼‰
        print(f"[WRITE] Iteration {i+1}/{iterations} completed in {elapsed:.4f} seconds")
    
    # Step 3: è¿”å›æ‰€æœ‰å†™å…¥è€—æ—¶åˆ—è¡¨
    return write_times


def read_file_stress_test(filename, iterations=5):
    """
    æ‰§è¡Œè¯»å–å‹åŠ›æµ‹è¯•ï¼šå¤šæ¬¡è¯»å–å¤§æ–‡ä»¶å¹¶è®°å½•è€—æ—¶
    
    Args:
        filename (str): ç›®æ ‡æ–‡ä»¶è·¯å¾„
        iterations (int): è¯»å–å¾ªç¯æ¬¡æ•°ï¼Œé»˜è®¤5æ¬¡
    
    Returns:
        list: æ¯æ¬¡è¯»å–è€—æ—¶çš„åˆ—è¡¨ï¼ˆå•ä½ï¼šç§’ï¼‰
    """
    import time
    
    # Step 1: åˆå§‹åŒ–è€—æ—¶è®°å½•åˆ—è¡¨
    read_times = []
    
    # Step 2: å¾ªç¯æ‰§è¡Œè¯»å–æ“ä½œ
    for i in range(iterations):
        # Step 2.1: è®°å½•å¼€å§‹æ—¶é—´
        start_time = time.time()
        
        # Step 2.2: ä»¥äºŒè¿›åˆ¶è¯»å–æ¨¡å¼æ‰“å¼€æ–‡ä»¶å¹¶è¯»å–å…¨éƒ¨å†…å®¹
        with open(filename, 'rb') as f:
            content = f.read()
        
        # Step 2.3: è®°å½•ç»“æŸæ—¶é—´å¹¶è®¡ç®—è€—æ—¶
        end_time = time.time()
        elapsed = end_time - start_time
        
        # Step 2.4: å°†æœ¬æ¬¡è€—æ—¶åŠ å…¥è®°å½•åˆ—è¡¨
        read_times.append(elapsed)
        
        # Step 2.5: æ‰“å°å½“å‰è½®æ¬¡ä¿¡æ¯ï¼ˆä¾¿äºè§‚å¯Ÿè¿›åº¦ï¼‰
        print(f"[READ] Iteration {i+1}/{iterations} completed in {elapsed:.4f} seconds")
    
    # Step 3: è¿”å›æ‰€æœ‰è¯»å–è€—æ—¶åˆ—è¡¨
    return read_times


def analyze_performance(write_times, read_times):
    """
    åˆ†æå‹æµ‹ç»“æœï¼šè®¡ç®—å¹³å‡å€¼ã€æœ€å¤§å€¼ã€æœ€å°å€¼
    
    Args:
        write_times (list): å†™å…¥è€—æ—¶åˆ—è¡¨
        read_times (list): è¯»å–è€—æ—¶åˆ—è¡¨
    
    Returns:
        dict: åŒ…å«ç»Ÿè®¡æŒ‡æ ‡çš„å­—å…¸
    """
    # Step 1: è®¡ç®—å†™å…¥æ€§èƒ½æŒ‡æ ‡
    avg_write = sum(write_times) / len(write_times)
    max_write = max(write_times)
    min_write = min(write_times)
    
    # Step 2: è®¡ç®—è¯»å–æ€§èƒ½æŒ‡æ ‡
    avg_read = sum(read_times) / len(read_times)
    max_read = max(read_times)
    min_read = min(read_times)
    
    # Step 3: æ„å»ºå¹¶è¿”å›åˆ†æç»“æœå­—å…¸
    analysis = {
        "write_avg_sec": round(avg_write, 4),
        "write_max_sec": round(max_write, 4),
        "write_min_sec": round(min_write, 4),
        "read_avg_sec": round(avg_read, 4),
        "read_max_sec": round(max_read, 4),
        "read_min_sec": round(min_read, 4)
    }
    
    return analysis


if __name__ == "__main__":
    # Step 1: è®¾ç½®æµ‹è¯•å‚æ•°
    TEST_FILE = "stress_test.dat"  # æµ‹è¯•æ–‡ä»¶å
    DATA_SIZE_MB = 10              # æµ‹è¯•æ•°æ®å¤§å°ï¼š10MB
    ITERATIONS = 3                 # å‹æµ‹è½®æ¬¡
    
    # Step 2: ç”Ÿæˆæµ‹è¯•æ•°æ®
    print("[INFO] Generating test data...")
    test_data = generate_test_data(DATA_SIZE_MB)
    
    # Step 3: æ‰§è¡Œå†™å…¥å‹æµ‹
    print(f"[INFO] Starting WRITE stress test ({ITERATIONS} iterations)...")
    write_results = write_file_stress_test(TEST_FILE, test_data, ITERATIONS)
    
    # Step 4: æ‰§è¡Œè¯»å–å‹æµ‹
    print(f"[INFO] Starting READ stress test ({ITERATIONS} iterations)...")
    read_results = read_file_stress_test(TEST_FILE, ITERATIONS)
    
    # Step 5: åˆ†æå‹æµ‹ç»“æœ
    print("[INFO] Analyzing performance results...")
    stats = analyze_performance(write_results, read_results)
    
    # Step 6: è¾“å‡ºæœ€ç»ˆåˆ†ææŠ¥å‘Š
    print("
=== PERFORMANCE REPORT ===")
    print(f"Write Avg: {stats['write_avg_sec']}s | Max: {stats['write_max_sec']}s | Min: {stats['write_min_sec']}s")
    print(f"Read  Avg: {stats['read_avg_sec']}s | Max: {stats['read_max_sec']}s | Min: {stats['read_min_sec']}s")
```
```

#### OUTPUT
```
[INFO] Generating test data...
[INFO] Starting WRITE stress test (3 iterations)...
[WRITE] Iteration 1/3 completed in 0.0123 seconds
[WRITE] Iteration 2/3 completed in 0.0118 seconds
[WRITE] Iteration 3/3 completed in 0.0121 seconds
[INFO] Starting READ stress test (3 iterations)...
[READ] Iteration 1/3 completed in 0.0087 seconds
[READ] Iteration 2/3 completed in 0.0085 seconds
[READ] Iteration 3/3 completed in 0.0086 seconds
[INFO] Analyzing performance results...

=== PERFORMANCE REPORT ===
Write Avg: 0.0121s | Max: 0.0123s | Min: 0.0118s
Read  Avg: 0.0086s | Max: 0.0087s | Min: 0.0085s
```

è¯¥ä»£ç ç¤ºä¾‹å®ç°äº†åŸºç¡€çš„è¯»å†™å‹åŠ›æµ‹è¯•åŠŸèƒ½ï¼ŒåŒ…å«å››ä¸ªæ ¸å¿ƒå‡½æ•°ï¼šæ•°æ®ç”Ÿæˆã€å†™å…¥å‹æµ‹ã€è¯»å–å‹æµ‹å’Œç»“æœåˆ†æã€‚é€šè¿‡ç”Ÿæˆå›ºå®šå¤§å°çš„å­—èŠ‚æ•°æ®ï¼ˆé»˜è®¤10MBï¼‰ï¼Œå¾ªç¯æ‰§è¡Œå¤šæ¬¡æ–‡ä»¶è¯»å†™æ“ä½œï¼Œå¹¶è®°å½•æ¯æ¬¡æ“ä½œçš„è€—æ—¶ï¼Œæœ€ç»ˆè¾“å‡ºæ€§èƒ½ç»Ÿè®¡æŠ¥å‘Šã€‚ä»£ç ç»“æ„æ¸…æ™°ï¼Œæ³¨é‡Šè¯¦å°½ï¼Œç¬¦åˆmediumå¤æ‚åº¦è¦æ±‚ã€‚

å…³é”®è®¾è®¡åŒ…æ‹¬ï¼šä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨ç¡®ä¿æ–‡ä»¶æ­£ç¡®å…³é—­ï¼›é‡‡ç”¨é«˜å¯†åº¦æ³¨é‡Šæ ‡æ³¨æ¯ä¸ªæ­¥éª¤ï¼›æä¾›å®Œæ•´çš„æ€§èƒ½æŒ‡æ ‡ï¼ˆå¹³å‡å€¼ã€æœ€å¤§å€¼ã€æœ€å°å€¼ï¼‰ï¼›æ”¯æŒè‡ªå®šä¹‰æµ‹è¯•è½®æ¬¡å’Œæ•°æ®å¤§å°ã€‚æ­¤ç¤ºä¾‹å¯ç›´æ¥ç”¨äºæœ¬åœ°ç£ç›˜IOæ€§èƒ½è¯„ä¼°ï¼Œä¹Ÿå¯ä½œä¸ºæ‰©å±•æ›´å¤æ‚å‹æµ‹åœºæ™¯çš„åŸºç¡€æ¡†æ¶ã€‚
```bash
# æ¨¡æ‹Ÿ 100 ä¸ªå¹¶å‘å®¢æˆ·ç«¯ï¼Œæ€»å…±æ‰§è¡Œ 100000 æ¬¡ SET æ“ä½œ
redis-benchmark -h 127.0.0.1 -p 6379 -c 100 -n 100000 -t set

# æµ‹è¯• GET + SET æ··åˆè¯»å†™ï¼Œç®¡é“æ¨¡å¼æå‡åå
redis-benchmark -h 127.0.0.1 -p 6379 -c 50 -n 50000 -t get,set -P 10
```

> âš ï¸ æ³¨æ„: `-P` å‚æ•°å¯ç”¨ç®¡é“ï¼ˆpipelineï¼‰ï¼Œå¯æ˜¾è‘—å‡å°‘ç½‘ç»œå¾€è¿”å¼€é”€ï¼Œæ›´è´´è¿‘çœŸå®é«˜å¹¶å‘åœºæ™¯ã€‚ç”Ÿäº§ç¯å¢ƒå‹æµ‹å»ºè®®é€æ­¥å¢åŠ  `-c`ï¼ˆå¹¶å‘æ•°ï¼‰å’Œ `-n`ï¼ˆæ€»è¯·æ±‚æ•°ï¼‰ï¼Œè§‚å¯Ÿæ€§èƒ½æ‹ç‚¹ã€‚

æ‰§è¡Œåï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹è¾“å‡ºï¼š

```python
def generate_stress_test_report(metrics_list):
    """
    ç”Ÿæˆå‹æµ‹ç»“æœæŠ¥å‘Šç‰‡æ®µï¼Œæ±‡æ€»å…³é”®æ€§èƒ½æŒ‡æ ‡å¹¶æ ¼å¼åŒ–è¾“å‡º
    
    Args:
        metrics_list: åŒ…å«å¤šä¸ªå‹æµ‹è½®æ¬¡æŒ‡æ ‡çš„å­—å…¸åˆ—è¡¨ï¼Œæ¯ä¸ªå­—å…¸åŒ…å« 'tps', 'latency_avg', 'error_rate', 'concurrency'
    
    Returns:
        str: æ ¼å¼åŒ–åçš„æŠ¥å‘Šæ–‡æœ¬
    """
    # Step 1: åˆå§‹åŒ–æ±‡æ€»ç»Ÿè®¡å˜é‡
    total_tps = 0.0
    total_latency = 0.0
    max_error_rate = 0.0
    sample_count = len(metrics_list)
    
    # Step 2: éå†æ¯ä¸€è½®å‹æµ‹æ•°æ®ï¼Œç´¯åŠ å…³é”®æŒ‡æ ‡
    for idx, metric in enumerate(metrics_list):
        # ç´¯åŠ  TPSï¼ˆæ¯ç§’äº‹åŠ¡æ•°ï¼‰
        total_tps += metric['tps']
        # ç´¯åŠ å¹³å‡å»¶è¿Ÿ
        total_latency += metric['latency_avg']
        # æ›´æ–°æœ€å¤§é”™è¯¯ç‡
        if metric['error_rate'] > max_error_rate:
            max_error_rate = metric['error_rate']
    
    # Step 3: è®¡ç®—å¹³å‡å€¼
    avg_tps = total_tps / sample_count if sample_count > 0 else 0.0
    avg_latency = total_latency / sample_count if sample_count > 0 else 0.0
    
    # Step 4: æ„å»ºæŠ¥å‘Šå¤´éƒ¨
    report_lines = []
    report_lines.append("=" * 60)
    report_lines.append(" å‹åŠ›æµ‹è¯•ç»“æœæ‘˜è¦ ".center(60, "="))
    report_lines.append("=" * 60)
    
    # Step 5: æ·»åŠ æ±‡æ€»ç»Ÿè®¡è¡Œ
    report_lines.append(f"æµ‹è¯•è½®æ¬¡æ€»æ•°: {sample_count} è½®")
    report_lines.append(f"å¹³å‡ TPS: {avg_tps:.2f} æ¬¡/ç§’")
    report_lines.append(f"å¹³å‡å“åº”å»¶è¿Ÿ: {avg_latency:.2f} ms")
    report_lines.append(f"æœ€å¤§é”™è¯¯ç‡: {max_error_rate * 100:.2f}%")
    
    # Step 6: æ·»åŠ åˆ†è½®æ¬¡æ˜ç»†ï¼ˆæœ€å¤šæ˜¾ç¤ºå‰5è½®ï¼‰
    report_lines.append("
è¯¦ç»†è½®æ¬¡æ•°æ®ï¼ˆå‰5è½®ï¼‰:")
    for i, m in enumerate(metrics_list[:5]):
        concurrency_level = m.get('concurrency', 'N/A')
        report_lines.append(
            f"  è½®æ¬¡ {i+1}: TPS={m['tps']:.1f}, å»¶è¿Ÿ={m['latency_avg']:.1f}ms, "
            f"é”™è¯¯ç‡={m['error_rate']*100:.1f}%, å¹¶å‘æ•°={concurrency_level}"
        )
    
    # Step 7: å¦‚æœè¶…è¿‡5è½®ï¼Œæ·»åŠ çœç•¥æç¤º
    if len(metrics_list) > 5:
        report_lines.append(f"  ...ï¼ˆå…±{len(metrics_list)}è½®ï¼Œä»…æ˜¾ç¤ºå‰5è½®ï¼‰")
    
    # Step 8: æ·»åŠ å¥åº·è¯„ä¼°ç»“è®º
    health_status = "è‰¯å¥½"
    if max_error_rate > 0.05:
        health_status = "è­¦å‘Šï¼šé”™è¯¯ç‡åé«˜"
    elif avg_latency > 500:
        health_status = "è­¦å‘Šï¼šå¹³å‡å»¶è¿Ÿè¿‡é«˜"
    
    report_lines.append(f"
ç³»ç»Ÿå¥åº·è¯„ä¼°: {health_status}")
    
    # Step 9: è¿”å›å®Œæ•´æŠ¥å‘Šå­—ç¬¦ä¸²
    return "
".join(report_lines)

# ç¤ºä¾‹è°ƒç”¨ä»£ç 
if __name__ == "__main__":
    # Step 10: å‡†å¤‡æ¨¡æ‹Ÿå‹æµ‹æ•°æ®
    sample_metrics = [
        {'tps': 120.5, 'latency_avg': 45.2, 'error_rate': 0.01, 'concurrency': 50},
        {'tps': 118.3, 'latency_avg': 47.8, 'error_rate': 0.02, 'concurrency': 50},
        {'tps': 125.0, 'latency_avg': 42.1, 'error_rate': 0.005, 'concurrency': 50},
        {'tps': 110.2, 'latency_avg': 55.3, 'error_rate': 0.03, 'concurrency': 50},
        {'tps': 130.1, 'latency_avg': 39.7, 'error_rate': 0.015, 'concurrency': 50},
        {'tps': 122.8, 'latency_avg': 48.9, 'error_rate': 0.025, 'concurrency': 50}  # ç¬¬6è½®ï¼Œç”¨äºè§¦å‘çœç•¥æç¤º
    ]
    
    # Step 11: è°ƒç”¨å‡½æ•°ç”ŸæˆæŠ¥å‘Š
    report = generate_stress_test_report(sample_metrics)
    
    # Step 12: è¾“å‡ºæŠ¥å‘Š
    print(report)
```

#### OUTPUT
```
============================================================
================== å‹åŠ›æµ‹è¯•ç»“æœæ‘˜è¦ ==================
============================================================
æµ‹è¯•è½®æ¬¡æ€»æ•°: 6 è½®
å¹³å‡ TPS: 121.15 æ¬¡/ç§’
å¹³å‡å“åº”å»¶è¿Ÿ: 46.50 ms
æœ€å¤§é”™è¯¯ç‡: 3.00%

è¯¦ç»†è½®æ¬¡æ•°æ®ï¼ˆå‰5è½®ï¼‰:
  è½®æ¬¡ 1: TPS=120.5, å»¶è¿Ÿ=45.2ms, é”™è¯¯ç‡=1.0%, å¹¶å‘æ•°=50
  è½®æ¬¡ 2: TPS=118.3, å»¶è¿Ÿ=47.8ms, é”™è¯¯ç‡=2.0%, å¹¶å‘æ•°=50
  è½®æ¬¡ 3: TPS=125.0, å»¶è¿Ÿ=42.1ms, é”™è¯¯ç‡=0.5%, å¹¶å‘æ•°=50
  è½®æ¬¡ 4: TPS=110.2, å»¶è¿Ÿ=55.3ms, é”™è¯¯ç‡=3.0%, å¹¶å‘æ•°=50
  è½®æ¬¡ 5: TPS=130.1, å»¶è¿Ÿ=39.7ms, é”™è¯¯ç‡=1.5%, å¹¶å‘æ•°=50
  ...ï¼ˆå…±6è½®ï¼Œä»…æ˜¾ç¤ºå‰5è½®ï¼‰

ç³»ç»Ÿå¥åº·è¯„ä¼°: è‰¯å¥½
```

è¯¥ä»£ç ç¤ºä¾‹å®ç°äº†ä¸€ä¸ªå‹åŠ›æµ‹è¯•ç»“æœæŠ¥å‘Šç”Ÿæˆå™¨ï¼Œä¸“ç”¨äºæ€§èƒ½éªŒè¯åœºæ™¯ä¸‹çš„æ•°æ®åˆ†æä¸å¯è§†åŒ–ã€‚å®ƒæ¥æ”¶ä¸€ä¸ªåŒ…å«å¤šè½®å‹æµ‹æŒ‡æ ‡çš„åˆ—è¡¨ï¼Œè‡ªåŠ¨è®¡ç®—å¹³å‡TPSã€å¹³å‡å»¶è¿Ÿå’Œæœ€å¤§é”™è¯¯ç‡ï¼Œå¹¶ä»¥ç»“æ„åŒ–æ–‡æœ¬å½¢å¼è¾“å‡ºæ‘˜è¦æŠ¥å‘Šã€‚ä»£ç é€šè¿‡æ­¥éª¤åŒ–æ³¨é‡Šæ¸…æ™°åˆ’åˆ†é€»è¾‘é˜¶æ®µï¼Œä»æ•°æ®èšåˆã€æ ¼å¼æ„å»ºåˆ°å¥åº·è¯„ä¼°ï¼Œç¡®ä¿å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

å…³é”®è®¾è®¡åŒ…æ‹¬é™åˆ¶æ˜ç»†å±•ç¤ºæ•°é‡é¿å…ä¿¡æ¯è¿‡è½½ã€åŠ¨æ€å¥åº·çŠ¶æ€åˆ¤å®šï¼ˆåŸºäºé”™è¯¯ç‡å’Œå»¶è¿Ÿé˜ˆå€¼ï¼‰ã€ä»¥åŠå¯¹è¾¹ç•Œæƒ…å†µï¼ˆå¦‚ç©ºåˆ—è¡¨ï¼‰çš„å®‰å…¨å¤„ç†ã€‚è¾“å‡ºæ ¼å¼é‡‡ç”¨å¯¹é½æ ‡é¢˜å’Œç¼©è¿›æ˜ç»†ï¼Œä¾¿äºåœ¨æ§åˆ¶å°æˆ–æ—¥å¿—ä¸­å¿«é€Ÿå®šä½å…³é”®æŒ‡æ ‡ï¼Œç¬¦åˆå·¥ç¨‹å®è·µä¸­å¯¹å‹æµ‹æŠ¥å‘Šçš„ä¸“ä¸šè¦æ±‚ã€‚
```
====== SET ======
  100000 requests completed in 1.23 seconds
  50 parallel clients
  3 bytes payload
  keep alive: 1

99.99% <= 1 milliseconds
100.00% <= 1 milliseconds
81300.81 requests per second
```

è¿™æ®µè¾“å‡ºä¸­è—ç€ä¸‰ä¸ªå…³é”®ä¿¡æ¯ï¼š**æ€»è€—æ—¶ 1.23sã€å¹³å‡å»¶è¿Ÿ â‰¤1msã€QPS è¾¾ 81300+** â€”â€” è¿™å°±æ˜¯æˆ‘ä»¬ä¸‹ä¸€èŠ‚è¦æ·±åº¦è§£è¯»çš„æ€§èƒ½ä¸‰è¦ç´ ã€‚

---

### äºŒã€è¯»æ‡‚æ€§èƒ½æŠ¥å‘Šï¼šQPSã€å»¶è¿Ÿã€ååé‡æ‹†è§£

#### QPSï¼ˆQueries Per Secondï¼‰
æ¯ç§’æŸ¥è¯¢æ•°ï¼Œè¡¡é‡ç³»ç»Ÿå¤„ç†èƒ½åŠ›çš„æ ¸å¿ƒæŒ‡æ ‡ã€‚Redis å•çº¿ç¨‹æ¨¡å‹ä¸‹ï¼ŒQPS è¶Šé«˜è¯´æ˜ CPU åˆ©ç”¨æ•ˆç‡è¶Šå¥½ã€‚å®æµ‹ä¸­å¸¸è§è¯¯åŒºæ˜¯åªçœ‹å³°å€¼ QPSï¼Œè€Œå¿½ç•¥ç¨³å®šæ€§â€”â€”çœŸæ­£çš„é«˜æ€§èƒ½æ˜¯â€œæŒç»­é«˜ QPSâ€ï¼Œè€Œéâ€œè„‰å†²å¼çˆ†å‘â€ã€‚

#### å»¶è¿Ÿï¼ˆLatencyï¼‰
å•æ¬¡è¯·æ±‚ä»å‘å‡ºåˆ°æ”¶åˆ°å“åº”çš„æ—¶é—´ã€‚å‹æµ‹æŠ¥å‘Šä¸­çš„ `99.99% <= 1 milliseconds` è¡¨ç¤º 99.99% çš„è¯·æ±‚éƒ½åœ¨ 1 æ¯«ç§’å†…å®Œæˆï¼Œè¿™æ˜¯æ¯”å¹³å‡å€¼æ›´é‡è¦çš„æŒ‡æ ‡â€”â€”å®ƒæ­ç¤ºäº†é•¿å°¾å»¶è¿Ÿé£é™©ã€‚

#### ååé‡ï¼ˆThroughputï¼‰
å•ä½æ—¶é—´å†…æˆåŠŸå¤„ç†çš„æ•°æ®æ€»é‡ï¼Œé€šå¸¸ä»¥ MB/s è¡¡é‡ã€‚å¯¹äºå¤§ Value åœºæ™¯ï¼ˆå¦‚ç¼“å­˜å›¾ç‰‡å…ƒæ•°æ®ï¼‰ï¼Œååé‡æ¯” QPS æ›´èƒ½åæ˜ çœŸå®è´Ÿè½½èƒ½åŠ›ã€‚

> ç±»æ¯”ç†è§£ï¼šæŠŠ Redis æƒ³è±¡æˆé«˜é€Ÿå…¬è·¯æ”¶è´¹ç«™ã€‚QPS æ˜¯æ¯åˆ†é’Ÿé€šè¿‡çš„è½¦è¾†æ•°ï¼Œå»¶è¿Ÿæ˜¯å•è½¦ç¼´è´¹è€—æ—¶ï¼Œååé‡åˆ™æ˜¯æ¯åˆ†é’Ÿæ”¶ç¼´çš„æ€»é‡‘é¢ã€‚ä¸‰è€…å…±åŒå†³å®šâ€œé€šè¡Œæ•ˆç‡â€ã€‚

---

### ä¸‰ã€Redis åŠ æŒå‰åï¼šå“åº”æ—¶é—´å¯¹æ¯”å®å½•

ä¸ºäº†ç›´è§‚å±•ç¤º Redis çš„åŠ é€Ÿæ•ˆæœï¼Œæˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ªå¯¹ç…§å®éªŒï¼šå¯¹åŒä¸€ä¸ªå•†å“è¯¦æƒ…é¡µæ¥å£ï¼Œåœ¨â€œç›´è¿æ•°æ®åº“â€å’Œâ€œå…ˆæŸ¥ Redis ç¼“å­˜â€ä¸¤ç§æ¨¡å¼ä¸‹åˆ†åˆ«å‹æµ‹ã€‚

```mermaid
```mermaid
flowchart LR
    subgraph å‰ç«¯å±‚
        F[æµè§ˆå™¨/å®¢æˆ·ç«¯]
    end
    subgraph åº”ç”¨å±‚
        A[åº”ç”¨æœåŠ¡å™¨]
    end
    subgraph ç¼“å­˜å±‚
        R[Redis ç¼“å­˜]
    end
    subgraph æ•°æ®å±‚
        D[æ•°æ®åº“]
    end
    F --> A
    A --> R
    R --> D
    A -.-> D
```
```

*Redis åœ¨å…¸å‹ Web æ¶æ„ä¸­çš„ä½ç½®ï¼šå‰ç«¯è¯·æ±‚ç»åº”ç”¨æœåŠ¡å™¨ï¼Œä¼˜å…ˆè®¿é—® Redis ç¼“å­˜ï¼Œç¼“å­˜æœªå‘½ä¸­æ—¶æŸ¥è¯¢æ•°æ®åº“*

*å›¾è¡¨è¯´æ˜ï¼šæ¨ªè½´ä¸ºå¹¶å‘ç”¨æˆ·æ•°ï¼ˆ50/100/500ï¼‰ï¼Œçºµè½´ä¸ºå¹³å‡å“åº”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ã€‚è“è‰²æŸ±ä¸ºæ— ç¼“å­˜æ¨¡å¼ï¼Œæ©™è‰²æŸ±ä¸º Redis ç¼“å­˜æ¨¡å¼ã€‚*

æ•°æ®è¶‹åŠ¿æ¸…æ™°å¯è§ï¼š
- **50 å¹¶å‘æ—¶**ï¼šæ— ç¼“å­˜ 42ms â†’ æœ‰ç¼“å­˜ 3msï¼Œæé€Ÿ 14 å€
- **500 å¹¶å‘æ—¶**ï¼šæ— ç¼“å­˜é£™å‡è‡³ 380ms â†’ æœ‰ç¼“å­˜ä»ç¨³å®šåœ¨ 5ms å†…
- **é”™è¯¯ç‡**ï¼šé«˜å¹¶å‘ä¸‹æ— ç¼“å­˜æ¥å£å‡ºç° 5xx é”™è¯¯ï¼ŒRedis æ¨¡å¼é›¶æŠ¥é”™

è¿™èƒŒåæ˜¯å†…å­˜è®¿é—®ï¼ˆçº³ç§’çº§ï¼‰ä¸ç£ç›˜ IOï¼ˆæ¯«ç§’çº§ï¼‰çš„æœ¬è´¨å·®å¼‚ã€‚å½“æ•°æ®åº“è¿˜åœ¨å¯»é“è¯»å–æ—¶ï¼ŒRedis å·²å®Œæˆåæ¬¡æ•°æ®äº¤æ¢ã€‚

> **å®æµ‹ Redis å•å®ä¾‹è½»æ¾çªç ´ 10ä¸‡+ QPSï¼Œæ€§èƒ½è‚‰çœ¼å¯è§ã€‚**

---

### å››ã€é¿å‘æŒ‡å—ï¼šå‹æµ‹ä¸­çš„å¸¸è§è¯¯åŒº

1. **å¿½ç•¥é¢„çƒ­é˜¶æ®µ**ï¼šé¦–æ¬¡å‹æµ‹å¯èƒ½å› æ“ä½œç³»ç»Ÿç¼“å­˜æœªå‘½ä¸­å¯¼è‡´æ•°æ®åä½ï¼Œå»ºè®®å…ˆè·‘ä¸€è½®â€œçƒ­èº«æµ‹è¯•â€å†é‡‡é›†æ­£å¼æ•°æ®ã€‚
2. **ç½‘ç»œç“¶é¢ˆè¯¯åˆ¤**ï¼šè‹¥å‹æµ‹æœºä¸ Redis ä¸åœ¨åŒä¸€å±€åŸŸç½‘ï¼Œç½‘ç»œå»¶è¿Ÿä¼šæˆä¸ºç“¶é¢ˆã€‚å»ºè®®ä½¿ç”¨ `--latency` å‚æ•°å•ç‹¬æµ‹è¯•ç½‘ç»œçŠ¶å†µã€‚
3. **Value å¤§å°å¤±çœŸ**ï¼šé»˜è®¤ 3 å­—èŠ‚ payload è¿‡äºç†æƒ³åŒ–ï¼Œå®é™…åº”ä½¿ç”¨ `-d` å‚æ•°è®¾ç½®æ¥è¿‘ä¸šåŠ¡çš„çœŸå®æ•°æ®å¤§å°ï¼ˆå¦‚ `-d 1024` æ¨¡æ‹Ÿ 1KB ç¼“å­˜å¯¹è±¡ï¼‰ã€‚

å‹æµ‹ä¸æ˜¯ç»ˆç‚¹ï¼Œè€Œæ˜¯æ€§èƒ½è°ƒä¼˜çš„èµ·ç‚¹ã€‚ä¸‹ä¸€ç« ã€Šæ€»ç»“ä¸è¿›é˜¶è·¯çº¿ã€‹ä¸­ï¼Œæˆ‘ä»¬å°†æ„å»ºå®Œæ•´çš„å­¦ä¹ é—­ç¯ï¼Œæ•™ä½ å¦‚ä½•å°† Redis æŠ€èƒ½æ²‰æ·€ä¸ºæ¶æ„æ€ç»´ï¼Œå¼€å¯ä»â€œå·¥å…·ä½¿ç”¨è€…â€åˆ°â€œç³»ç»Ÿè®¾è®¡è€…â€çš„èœ•å˜ä¹‹æ—…ã€‚

---

## æ€»ç»“ä¸è¿›é˜¶è·¯çº¿

ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™æ ·çš„æƒ…å†µï¼šæ˜æ˜æŒæ¡äº† Redis çš„åŸºç¡€å‘½ä»¤ï¼Œçº¿ä¸ŠæœåŠ¡å´çªç„¶å› å†…å­˜æº¢å‡ºå´©æºƒï¼Ÿæˆ–è€…ä½ ä»¥ä¸ºæ•°æ®ä¸‡æ— ä¸€å¤±ï¼Œç»“æœé‡å¯åå‘ç°å…³é”®ç¼“å­˜å…¨éƒ¨ä¸¢å¤±ï¼Ÿâ€”â€”è¿™å¹¶éæŠ€æœ¯ç¼ºé™·ï¼Œè€Œæ˜¯å­¦ä¹ é—­ç¯å°šæœªå½¢æˆã€‚90%çš„æ€§èƒ½é—®é¢˜å’Œç³»ç»Ÿæ•…éšœï¼Œéƒ½æºäºå¯¹â€œé…ç½®ç»†èŠ‚â€å’Œâ€œè¿è¡Œæ—¶è¾¹ç•Œâ€çš„å¿½è§†ã€‚æŒæ¡ Redis ä¸åªæ˜¯ä¼š SET/GETï¼Œæ›´åœ¨äºç†è§£å®ƒå¦‚ä½•åœ¨çœŸå®ç”Ÿäº§ç¯å¢ƒä¸­å‘¼å¸ã€æ‰¿å‹ã€è‡ªæ„ˆã€‚

æƒ³è±¡ä¸€ä¸‹ï¼Œå‡Œæ™¨ä¸‰ç‚¹ï¼ŒæŠ¥è­¦çŸ­ä¿¡ç–¯ç‹‚å¼¹å‡ºï¼šâ€œRedis å†…å­˜ä½¿ç”¨ç‡ 98%ï¼â€ä½ æ‰‹å¿™è„šä¹±é‡å¯å®ä¾‹ï¼Œå´å‘ç°ç”¨æˆ·è´­ç‰©è½¦æ•°æ®å…¨æ²¡äº†â€”â€”å› ä¸ºæ²¡å¼€æŒä¹…åŒ–ã€‚è¿™ä¸æ˜¯ç”µå½±æƒ…èŠ‚ï¼Œè€Œæ˜¯æ— æ•°å›¢é˜Ÿè¸©è¿‡çš„å‘ã€‚æœ¬ç« å°†ä¸ºä½ æ¢³ç†çŸ¥è¯†è„‰ç»œã€ç‚¹æ˜è‡´å‘½é™·é˜±ï¼Œå¹¶è§„åˆ’ä¸€æ¡ä»â€œä¼šç”¨â€åˆ°â€œç²¾é€šâ€çš„è¿›é˜¶è·¯çº¿ï¼ŒåŠ©ä½ æ„å»ºçœŸæ­£çš„ Redis å·¥ç¨‹èƒ½åŠ›ã€‚

---

### å›é¡¾æ ¸å¿ƒçŸ¥è¯†ç‚¹ä¸æ“ä½œå‘½ä»¤

åœ¨è¸ä¸Šè¿›é˜¶ä¹‹è·¯å‰ï¼Œè®©æˆ‘ä»¬å¿«é€Ÿå›æº¯å·²æŒæ¡çš„æ ¸å¿ƒèƒ½åŠ›ã€‚ä½ å·²ç»ç†Ÿæ‚‰äº†äº”å¤§æ•°æ®ç»“æ„ï¼ˆStringã€Hashã€Listã€Setã€Sorted Setï¼‰åŠå…¶å…¸å‹åº”ç”¨åœºæ™¯ï¼›æŒæ¡äº† EXPIREã€TTL ç­‰ç”Ÿå‘½å‘¨æœŸç®¡ç†å‘½ä»¤ï¼›èƒ½ç†Ÿç»ƒä½¿ç”¨ Pipeline å’Œäº‹åŠ¡æå‡ååé‡ï¼›å¹¶é€šè¿‡ä¸Šä¸€ç« çš„å‹åŠ›æµ‹è¯•ï¼Œç†è§£äº† QPSã€å»¶è¿Ÿã€å‘½ä¸­ç‡ç­‰å…³é”®æ€§èƒ½æŒ‡æ ‡çš„æ„ä¹‰ã€‚

> è¿™äº›ä¸æ˜¯é›¶æ•£çš„çŸ¥è¯†ç‚¹ï¼Œè€Œæ˜¯ä¸€ä¸ªæœ‰æœºçš„æ“ä½œä½“ç³»ï¼š**æ•°æ®å»ºæ¨¡ â†’ å‘½ä»¤é€‰æ‹© â†’ æ€§èƒ½è°ƒä¼˜ â†’ å®¹ç¾éªŒè¯**ã€‚æ¯ä¸€æ¬¡ GET æ“ä½œèƒŒåï¼Œæ˜¯å†…å­˜åˆ†é…ç­–ç•¥ï¼›æ¯ä¸€æ¬¡ DEL èƒŒåï¼Œæ˜¯æƒ°æ€§åˆ é™¤ä¸å®šæœŸæ¸…ç†çš„åšå¼ˆã€‚åªæœ‰å°†å‘½ä»¤ç½®äºç³»ç»Ÿä¸Šä¸‹æ–‡ä¸­ç†è§£ï¼Œæ‰èƒ½é¿å…â€œçŸ¥å…¶ç„¶ä¸çŸ¥å…¶æ‰€ä»¥ç„¶â€ã€‚

ä¸¾ä¸ªä¾‹å­ï¼šä½ ç”¨ Hash å­˜å‚¨ç”¨æˆ·èµ„æ–™ï¼Œçœ‹ä¼¼åˆç†ï¼Œä½†å¦‚æœå­—æ®µæ•°é‡åŠ¨æ€å¢é•¿ä¸”æ— ä¸Šé™ï¼Œå°±å¯èƒ½è§¦å‘ Redis çš„ rehash æ“ä½œï¼Œå¯¼è‡´ç¬æ—¶å»¶è¿Ÿé£™å‡ã€‚è¿™æ—¶ï¼Œä½ å°±éœ€è¦ç»“åˆ OBJECT ENCODING å’Œ MEMORY USAGE å‘½ä»¤åšç²¾ç»†åŒ–ç›‘æ§ â€”â€” è¿™æ­£æ˜¯ä»â€œä½¿ç”¨â€è¿ˆå‘â€œæŒæ§â€çš„è½¬æŠ˜ç‚¹ã€‚

---

### å¸¸è§é™·é˜±æé†’ï¼šå†…å­˜æº¢å‡ºã€æŒä¹…åŒ–é…ç½®ç¼ºå¤±

âš ï¸ æ³¨æ„: **Redis é»˜è®¤ä¸å¼€å¯æŒä¹…åŒ–ï¼Œä¹Ÿä¸é™åˆ¶æœ€å¤§å†…å­˜ï¼** è¿™ä¸¤ä¸ªâ€œé»˜è®¤è®¾ç½®â€æ˜¯ç”Ÿäº§ç¯å¢ƒæœ€å¤§çš„å®šæ—¶ç‚¸å¼¹ã€‚

- **å†…å­˜æº¢å‡ºï¼ˆOOMï¼‰**ï¼šå½“ Redis å†…å­˜è¾¾åˆ° maxmemory é™åˆ¶ï¼ˆé»˜è®¤æ— é™åˆ¶ï¼‰ï¼Œè‹¥æœªé…ç½®æ·˜æ±°ç­–ç•¥ï¼ˆå¦‚ volatile-lruã€allkeys-lfuï¼‰ï¼Œå†™å…¥æ“ä½œå°†ç›´æ¥è¿”å›é”™è¯¯ï¼Œå¯¼è‡´æœåŠ¡ä¸å¯ç”¨ã€‚æ›´éšè”½çš„æ˜¯ï¼Œå³ä½¿é…ç½®äº†æ·˜æ±°ç­–ç•¥ï¼Œè‹¥çƒ­ç‚¹æ•°æ®é›†ä¸­æˆ–å­˜åœ¨å¤§ Keyï¼Œä»å¯èƒ½å› é¢‘ç¹æ·˜æ±°å½±å“æ€§èƒ½ã€‚
  
  è§£å†³æ–¹æ¡ˆï¼šåŠ¡å¿…åœ¨ redis.conf ä¸­è®¾ç½® `maxmemory` å’Œ `maxmemory-policy`ï¼Œå¹¶å®šæœŸä½¿ç”¨ `MEMORY STATS` å’Œ `SCAN + DEBUG OBJECT` æ’æŸ¥å¤§ Keyã€‚

- **æŒä¹…åŒ–é…ç½®ç¼ºå¤±**ï¼šRDB å¿«ç…§å’Œ AOF æ—¥å¿—æ˜¯æ•°æ®å®‰å…¨çš„åŒä¿é™©ã€‚å¾ˆå¤šå¼€å‘è€…è¯¯ä»¥ä¸ºâ€œç¼“å­˜ä¸éœ€è¦æŒä¹…åŒ–â€ï¼Œä½†ä¸€æ—¦ä¸»ä»åˆ‡æ¢ã€èŠ‚ç‚¹å®•æœºæˆ–äººä¸ºè¯¯æ“ä½œï¼Œæ²¡æœ‰æŒä¹…åŒ–çš„å®ä¾‹ç­‰äºè£¸å¥”ã€‚å°¤å…¶åœ¨å®¹å™¨åŒ–éƒ¨ç½²ä¸­ï¼ŒPod é‡å¯å³æ•°æ®å½’é›¶ã€‚

  æœ€ä½³å®è·µï¼šè‡³å°‘å¼€å¯ RDBï¼ˆsave é…ç½®ï¼‰ï¼Œå¯¹å…³é”®ä¸šåŠ¡å»ºè®®åŒæ—¶å¯ç”¨ AOFï¼ˆappendonly yes + appendfsync everysecï¼‰ã€‚åˆ«å¿˜äº†å®šæœŸéªŒè¯ RDB æ–‡ä»¶å¯æ¢å¤æ€§ï¼

è¿™äº›é™·é˜±ä¹‹æ‰€ä»¥é«˜é¢‘å‘ç”Ÿï¼Œæ˜¯å› ä¸ºå®ƒä»¬â€œå¹³æ—¶ä¸æŠ¥é”™ï¼Œå‡ºäº‹å³ç¾éš¾â€ã€‚å»ºç«‹æ£€æŸ¥æ¸…å•ï¼ˆChecklistï¼‰å¹¶åœ¨æ¯æ¬¡ä¸Šçº¿å‰é€é¡¹æ ¸å¯¹ï¼Œæ˜¯å·¥ç¨‹å¸ˆå¯¹æŠ—ç†µå¢çš„æœ‰æ•ˆæ­¦å™¨ã€‚

---

### æ¨èä¸‹ä¸€æ­¥ï¼šé›†ç¾¤éƒ¨ç½²ã€Luaè„šæœ¬ã€ç›‘æ§å‘Šè­¦

æŒæ¡åŸºç¡€åªæ˜¯å¼€å§‹ï¼ŒRedis çš„æ·±åº¦ä¼˜åŒ–ç©ºé—´æ— é™å¹¿é˜”ã€‚å½“ä½ èƒ½ç¨³å®šè¿ç»´å•æœºå®ä¾‹åï¼Œä¸‹ä¸€æ­¥åº”èšç„¦äº**é«˜å¯ç”¨æ¶æ„**ã€**åŸå­é€»è¾‘å°è£…**å’Œ**å¯è§‚æµ‹æ€§å»ºè®¾**ï¼š

1. **é›†ç¾¤éƒ¨ç½²ï¼ˆCluster Modeï¼‰**  
   ä»ä¸»ä»å¤åˆ¶ï¼ˆReplicationï¼‰è¿‡æ¸¡åˆ° Redis Clusterï¼Œå®ç°è‡ªåŠ¨åˆ†ç‰‡ä¸æ•…éšœè½¬ç§»ã€‚å­¦ä¹  `redis-cli --cluster create` æ­å»ºé›†ç¾¤ï¼Œç†è§£æ§½ä½ï¼ˆslotï¼‰è¿ç§»æœºåˆ¶ï¼Œå¹¶é€šè¿‡ `CLUSTER NODES` ç›‘æ§æ‹“æ‰‘çŠ¶æ€ã€‚æ³¨æ„ï¼šå®¢æˆ·ç«¯éœ€æ”¯æŒé›†ç¾¤åè®®ï¼ˆå¦‚ JedisClusterã€Lettuceï¼‰ã€‚

2. **Lua è„šæœ¬å®ç°åŸå­æ“ä½œ**  
   å½“å¤šä¸ªå‘½ä»¤éœ€ä¿è¯åŸå­æ€§ï¼ˆå¦‚â€œæ‰£åº“å­˜+è®°å½•æ—¥å¿—â€ï¼‰ï¼ŒPipeline ä¸å¤Ÿç”¨ï¼Œäº‹åŠ¡åˆå¤ªé‡ã€‚æ­¤æ—¶ Lua è„šæœ¬æ˜¯å®Œç¾æ–¹æ¡ˆï¼š`EVAL "if redis.call('get',KEYS[1]) >= ARGV[1] then return redis.call('decrby',KEYS[1],ARGV[1]) else return 0 end" 1 stock 10` å¯åœ¨æœåŠ¡ç«¯åŸå­æ‰§è¡Œå¤æ‚é€»è¾‘ï¼Œé¿å…ç«æ€æ¡ä»¶ã€‚

3. **ç›‘æ§å‘Šè­¦ä½“ç³»æ­å»º**  
   ä½¿ç”¨ Prometheus + Grafana ç›‘æ§ `used_memory`ã€`connected_clients`ã€`keyspace_hits/misses` ç­‰æŒ‡æ ‡ï¼›é…ç½® Alertmanager å¯¹å†…å­˜çªå¢ã€æ…¢æŸ¥è¯¢ï¼ˆslowlogï¼‰ã€ä¸»ä»å»¶è¿Ÿå‘å‡ºå‘Šè­¦ã€‚æ›´è¿›ä¸€æ­¥ï¼Œå¯æ¥å…¥ ELK åˆ†æè®¿é—®æ—¥å¿—ï¼Œå®šä½å¼‚å¸¸æ¨¡å¼ã€‚

---

> æŒæ¡åŸºç¡€åªæ˜¯å¼€å§‹ï¼ŒRedis çš„æ·±åº¦ä¼˜åŒ–ç©ºé—´æ— é™å¹¿é˜”ã€‚

ä¸è¦æ­¢æ­¥äºâ€œèƒ½è·‘é€šDemoâ€ã€‚çœŸæ­£çš„é«˜æ‰‹ï¼Œæ˜¯åœ¨æ·±å¤œæ”¶åˆ°å‘Šè­¦æ—¶èƒ½ä»å®¹å®šä½æ ¹å› ï¼Œåœ¨æ¶æ„è¯„å®¡æ—¶èƒ½é¢„åˆ¤æ‰©å±•ç“¶é¢ˆï¼Œåœ¨æ€§èƒ½å‹æµ‹åèƒ½ç»™å‡ºç²¾å‡†è°ƒå‚å»ºè®®ã€‚ä½ çš„ä¸‹ä¸€ç«™ï¼Œæ˜¯æˆä¸ºé‚£ä¸ªè®©å›¢é˜Ÿå®‰å¿ƒæ‰˜ä»˜ç¼“å­˜å±‚çš„äººâ€”â€”è€Œè¿™æ¡è·¯ï¼Œå§‹äºä»Šæ—¥çš„æ€»ç»“ï¼ŒæˆäºæŒç»­çš„åˆ»æ„ç»ƒä¹ ã€‚
---

## æ€»ç»“

- Redis æ˜¯åŸºäºå†…å­˜çš„å¤šæ•°æ®ç»“æ„å­˜å‚¨å¼•æ“ï¼Œé€‚ç”¨äºé«˜é€Ÿç¼“å­˜ä¸å®æ—¶å¤„ç†
- é€šè¿‡ Docker å¯å¿«é€Ÿéƒ¨ç½²å¼€å‘ç¯å¢ƒï¼Œé™ä½å…¥é—¨é—¨æ§›
- ç†Ÿç»ƒä½¿ç”¨äº”å¤§æ•°æ®ç»“æ„å¯è¦†ç›– 90% ä¸šåŠ¡åœºæ™¯
- æ€§èƒ½æµ‹è¯•éªŒè¯äº† Redis çš„è¶…é«˜ååèƒ½åŠ›ï¼Œæ˜¯æ¶æ„æé€Ÿåˆ©å™¨

## å»¶ä¼¸é˜…è¯»

æ¨èé˜…è¯»ã€ŠRedis è®¾è®¡ä¸å®ç°ã€‹æ·±å…¥åŸç†ï¼Œæˆ–å°è¯• Redis Cluster é›†ç¾¤éƒ¨ç½²å®æˆ˜ã€‚

## å‚è€ƒèµ„æ–™

1. https://redis.io/docs/
2. https://github.com/redis/redis
3. https://redis.io/docs/getting-started/installation/
